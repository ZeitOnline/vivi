CHANGES
=======

1.4.4 (unreleased)
------------------

- The discovery of the cannonical id of a resource does a HEAD request on the
  base url (w/o trailing slash) now. This leads to massively decreased 404's on
  the server.
- Removed auto-redirect in dav module as this was not required and just added
  complexity.
- Removed unnecessary PROPFIND's in dav module.
- Added a stress test which does property changes in parallel.

1.4.3 (2008-08-05)
------------------

- Changed the way the body cache keeps track of access times. The new way is
  hopefully less conflict prone.


1.4.2 (2008-08-05)
------------------

- When the connector invalidates resources, the're reloaded immedeately to
  have less conflict potential.

1.4.1 (2008-08-01)
------------------

- Made cache sweep more stable agains inconsistent data.

1.4 (2008-08-01)
----------------

- Empty WebDAV properties were returned as None and subsequently stored as
  'None' (fixes bug #4443).

1.3 (2008-07-29)
----------------

- Reverted changes from 1.2 and added a test to make sure the properties are in
  fact updated.

1.2 (2008-07-29)
----------------

- Do not re-set the property cache on ``changeProperties`` but just update.

1.1 (2008-07-24)
----------------

- Body-Cache doesn't store strings directly but via a persistent object.
- Use a Singleton class for webdav property keys.
- Body-Cache always returns an object which can be passed beyond the
  transaction boundary now.
- Mock stores Content-Type of resources now.

1.0 (2008-07-14)
----------------

- Only invalidate parent on adding resource when really necessary.

1.0b4 (2008-07-09)
------------------

- longrunning.txt did not reset DEBUG_CONNECTION.
- Removed conflict hotspot from property and child id cache.

1.0b3 (2008-07-04)
------------------

- Caches are using the plain unique id as cache key now (not reversed).
- Property-Cache reuses (name, namespace) tuples hand passes out references to
  the same tuples. This leads to having only one tuple instance per (name,
  namespace).
- PropertyCache stores the properties as OOBTree.
- ChildNameCache stores the childnames as TreeSet
- Small bodies (<=10 kB) are no longer stored as blob but as plain string.
- Fix for "BadStatusLine" which occours when the DAV server closes the
  connection.

1.0b2 (2008-06-28)
------------------

- Fixed handling on transaction abort so we're not writing to the database
  during "committing" phase.
- Removed property cache invalidation during server startup since this is just
  too heavy for production use.
- `changeProperties` doesn't invalidate the resource but updates the cache
  itself.
- Removed content migration script.

1.0b1 (2008-06-27)
------------------

- Using event system in ZopeConnector to invalidate caches.
- Fixed a bug when getting NULLResources or other resources w/o etag (bug
  #4315).
- Make sure connector continues to work when the connection gets into an
  inconsistent state (bug #4109).

0.22 (2008-06-23)
-----------------

- Mock: Allowed to get the root as resource.

0.21 (2008-06-16)
-----------------

- Make sure 'NoneType' object has no attribute 'group' doesn't occur anymore.
- Make sure XML-like content can be put in a property by prefixing it. This is
  a temporary fix until it is decided what the DAV server will do in this case.
- Added a DataManager where the connector can register things to clean up on
  transaction abort.
- Sending User-Agent "zeit.connector"

0.20 (2008-06-10)
-----------------

- General code cleanup
- Explicitly reading all data from response instead of brutally closing the
  connection.
- Use lxml to generate xml instead of string-concatenation in most places.

0.19 (2008-05-23)
-----------------

- Fixed better lock handling from 0.17
- Only invalidating parent of a resource when parent actually has changed.

0.18 (2008-05-19)
-----------------

- Fixed a bug in the cache sweeping which did not remove the actual data.
- Diversified cache keys by reversing unique_id. Objects which are close in the
  tree should now be in differend BTree buckets.

0.17 (2008-05-19)
-----------------

- Better lock handling: always look for definete information on the server
  before locking/unlocking or doing anything with a lock. 
- Removed the live searching tests.

0.16 (2008-05-13)
-----------------

- Moved ZopeConnector to sperate module.
- Keep HTTP connection open for better performance. Connections will be closed
  at the end of the transaction (ZopeConnector).

0.15 (2008-04-28)
-----------------

- Fixed a bug in copy code which was not invalidating the caches correctly.

0.14 (2008-04-22)
-----------------

- `zeit.connector.connector.Connector` doesn't use the component architecture
  now. This makes it easier to use in console scripts.
- <feed> is now <channel> (mock connector).
- connector's move method uses copy+delete now
- Added copy method to IConnector which allows copying files and directories.
- Enabled move to move directories.

0.13 (2008-04-07)
-----------------

- Made DeleteProperty a rock in the zope.security.

0.12 (2008-03-25)
-----------------

- Moved locktoken storage to a separate utility, out of a cache.
- Added events to notify caches about invalidated resources.
