vivi.core changes
=================

4.59.1 (unreleased)
-------------------

- ZON-6482: Enable speechbert by default for articles with no genre


4.59.0 (2021-07-19)
-------------------

- TOPIC-36: Add reach as automatic area source

- OPS-2077: Log failed celery tasks, so we can debug them

- FIX: Return correct result count for related topicpages


4.58.1 (2021-07-16)
-------------------

- OPS-2058: Move logout redirect to zeit.ldap
- TOPIC-36: Add Reach as automatic area source


4.58.0 (2021-07-13)
-------------------

- TOPIC-31: Move zeit.web.core.reach to zeit.reach


4.57.7 (2021-07-13)
-------------------

- MAINT: Display principal id if no principal was found


4.57.6 (2021-07-13)
-------------------

- FIX: Use correct form name for autoreload with genre


4.57.5 (2021-07-12)
-------------------

- TOPIC-11: Sort automatic areas by date_last_published


4.57.4 (2021-07-09)
-------------------

- ZON-6316: Speechbert Checkbox: Moving to options and rename label

- OPS-2024: Handles invalid variant size

- TOPIC-16: Add ITMS methods get_content_containing_topicpages and get_content_related_topicpages

- TOPIC-9: Implement TMS order in a way that does not break the related API

- MAINT: Move zeit.retresco.tag to zeit.cms.tagging.tag


4.57.3 (2021-07-05)
-------------------

- BUG-1415: Be more defensive during BC video import

- TOPIC-9: Store topicpage_order abstracted from the concrete TMS fieldnames


4.57.2 (2021-06-30)
-------------------

- FIX: Hide Topicpage sort option when anything else is selected


4.57.1 (2021-06-30)
-------------------

- ZON-6710: Changes topicbox default automatic_type value



4.57.0 (2021-06-29)
-------------------

- ZON-5970: Remove clickcounter integration

- OPS-1985: Use opentelemetry for tracing


4.56.0 (2021-06-28)
-------------------

- TOPIC-9: Provide access to TMS kpi data with `IKPI` adapter


4.55.0 (2021-06-23)
-------------------

- TOPIC-9: Add possibility to sort TMS entries
- TOPIC-9: Add related topics as automatic source

- ZON-6655: Improve wording


4.54.2 (2021-06-21)
-------------------

- OPS-2001: Restrict "change type" to producing+cvd


4.54.1 (2021-06-16)
-------------------

- BEM-54: Be defensive about analyzing the BC response


4.54.0 (2021-06-16)
-------------------

- OPS-1984: Conform to real `Span` API in FakeTracer


4.53.3 (2021-06-07)
-------------------

- BEM-54: Improve Error-Logging for not playable videos


4.53.2 (2021-06-03)
-------------------

- MAINT: Use own converter for RecipeArticles
- OPS-1852: Markdown modules must not be empty

- ZON-6539: remove option for editors to include articles in daily newsletter


4.53.1 (2021-05-31)
-------------------

- STO-185: Handle indeterminable mtime gracefully


4.53.0 (2021-05-27)
-------------------

- ZON-6655: Fix related API, support multiple topicboxes per article

- OPS-1892: Add sample_rate parameter to honeycomb tracer


4.52.2 (2021-05-18)
-------------------

- BUG-1392: Avoid PIL resize with 0 values

- OPS-1359: Conform to field naming scheme for tracing


4.52.1 (2021-04-29)
-------------------

- MAINT: Add feature toggle 'show_automatic_type_in_topicbox'


4.52.0 (2021-04-27)
-------------------

- ZON-5576: Add automatic sources to article topicbox modules


4.51.1 (2021-04-26)
-------------------

- MAINT: Exclude JSON objects from SEO filename rules


4.51.0 (2021-04-23)
-------------------

- ZON-6637: Introduce JSON content object

- ZON-6377: Fix rendering of teaser images with `fill_color=None` parameters


4.50.6 (2021-04-21)
-------------------

- ZON-6614: Support caching time attribute on centerpages


4.50.5 (2021-04-08)
-------------------

- STO-185: Cache content & DAV properties based on file modification times


4.50.4 (2021-04-07)
-------------------

- ZON-6573: Support legal_text attribute on newslettersignups


4.50.3 (2021-03-30)
-------------------

- OPS-1684: Avoid zero division on image ratio calculations

- FIX: Ignore XML comments when parsing article modules


4.50.2 (2021-03-22)
-------------------

- ZON-6478: Follow up, refactor existing_teasers attribute for CP ContentQueries


4.50.1 (2021-03-17)
-------------------

- ZON-6521: Support theme in liveblogs


4.50.0 (2021-03-16)
-------------------

- ZON-6478: Move content query functionality to its own module

- BUG-1250: Hide no more needed 'external' author checkbox


4.49.2 (2021-03-10)
-------------------

- BUG-1366: Make sorting volume listings work again for py3


4.49.1 (2021-03-10)
-------------------

- ZON-6346: Make tickaroo liveblog status required

- BUG-1311: Show "steal lock" button only if user has the required permission

- BUG-1366: Make sorting listings work again for py3


4.49.0 (2021-02-24)
-------------------

- MAINT: Add status code to retresco TechnicalError


4.48.8 (2021-02-10)
-------------------

- ZON-6383: Handle Markdown using python libraries

- ZON-6346: Add article module for tickaroo liveblog


4.48.7 (2021-02-01)
-------------------

- ZON-6275: Urbanairship open channel support


4.48.6 (2021-01-29)
-------------------

- ZETT-98: Provide social channels facebook and twitter for zett


4.48.5 (2021-01-25)
-------------------

- STO-179: Handle changed "total hits" ES search API response


4.48.4 (2021-01-21)
-------------------

- STO-179: Remove overspecific `type` restriction from ES queries


4.48.3 (2021-01-21)
-------------------

- STO-59: Keep internal API of TMS connection stable for zeit.web


4.48.2 (2021-01-19)
-------------------

- STO-59: Upgrade elastic client library to 7.x (it's bw-compat to 2.x)


4.48.1 (2021-01-12)
-------------------

- STO-172: Don't send obsolete DAV properties to TMS


4.48.0 (2021-01-11)
-------------------

- STO-59: Allow Vivi to talk to two TMS instances


4.47.1 (2021-01-06)
-------------------

- BUG-1324: Handle image/author/volume modules correctly during checkin


4.47.0 (2021-01-06)
-------------------

- BUG-1315: Fix Update-Token-Tool for Facebook

- OPS-1516: Make image encoder parameters configurable


4.46.1 (2020-12-18)
-------------------

- BUG-1342: Fix accessing dotted property names in TMSContent


4.46.0 (2020-12-18)
-------------------

- BUG-1342: Apply provided interfaces to TMSContent


4.45.6 (2020-12-18)
-------------------

- ZON-6306: Fix text/bytes handling in MDB interface


4.45.5 (2020-12-16)
-------------------

- ZON-6319: Fix behavior for select the 'no genre' option

- BEM-70: mock is included in the stdlib in py3


4.45.4 (2020-12-16)
-------------------

- OPS-1490: Allow volume to be set to 54 (everywhere)


4.45.3 (2020-12-16)
-------------------

- OPS-1490: Allow volume to be set to 54


4.45.2 (2020-12-10)
-------------------

- OPS-1480: Log pickle on unpickling errors


4.45.1 (2020-12-10)
-------------------

- OPS-1480: Log error when unpickling lxml


4.45.0 (2020-12-04)
-------------------

- ZETT-90: Add vivi logo for ze.tt

- ZON-6162: Update to jinja-2.11


4.44.5 (2020-12-01)
-------------------

- ZON-6214: Sends article to the ContentHub, even if it was "only published"

- STO-57: Add type declarations for countings and foldable


4.44.4 (2020-11-25)
-------------------

- ZON-6213: Fix zeit.cms newsimport test setup.


4.44.3 (2020-11-25)
-------------------

- MAINT: Update product-config in test setup.


4.44.2 (2020-11-19)
-------------------

- STO-82: Make MemoryFile pickleable


4.44.1 (2020-11-18)
-------------------

- PERF: Cache immutable values while calculating image variants


4.44.0 (2020-11-13)
-------------------

- MAINT: Move tracing implementation from zeit.web here so we can
  instrument vivi code paths as well


4.43.3 (2020-11-05)
-------------------

- ZON-6140: Support additional attributes from newslettersignup config


4.43.2 (2020-10-22)
-------------------

- ZON-6149: Pass url during image traversal


4.43.1 (2020-10-22)
-------------------

- ZON-5577: Set default for `force_mobile_images` to true


4.43.0 (2020-10-13)
-------------------

- ZETT-46: Add color theme selection to area settings

- BEM-62: Remove obsolete `IArticle.is_instant_article`

- ZON-6149: Allow to specify imagegroup variants via query parameters


4.42.0 (2020-10-08)
-------------------

- STO-82: Make MemoryFile usable as a context manager


4.41.1 (2020-10-06)
-------------------

- BUG-1291: Set up timebased retract for videos according to the BC
  expires field (take two, after 4.40.3)


4.41.0 (2020-10-01)
-------------------

- PERF: Make mime type detection optional in filesystem connector.
  We actually only need this for the vivi tests, but not in zeit.web,
  and it causes significant overhead.


4.40.3 (2020-09-30)
-------------------

- BUG-1302: Don't overzealously remove invalid field values

- Revert BUG-1291 for now, newly added videos cannot set up timebased
  retract currently


4.40.2 (2020-09-30)
-------------------

- BUG-1291: Set up timebased retract for videos according to the BC
  expires field


4.40.1 (2020-09-30)
-------------------

- BUG-1307: Don't notify HDok during retract


4.40.0 (2020-09-28)
-------------------

- ZON-6068: Implement IArticle.header_color


4.39.5 (2020-09-22)
-------------------

- WOMA-181: Add notification for empty recipe title

- WOMA-204: Add aggregations to retresco.ElasticSearch query api


4.39.4 (2020-09-21)
-------------------

- WOMA-240: Add diet to wochenmarkt ingredients.


4.39.3 (2020-09-10)
-------------------

- MAINT: Update zeit.connector to current zope.generations API


4.39.2 (2020-09-03)
-------------------

- BUG-1283: Size of images in image gallery editor is max 500 px x 500 px

- ZON-6108: Remove legacy ``type`` attribute from content editor line breaks


4.39.1 (2020-08-06)
-------------------

- BUG-1273: Handle toplevel `br` nodes that can appear when pasting content


4.39.0 (2020-08-05)
-------------------

- WOMA-143: Add "special ingredient" to recipelist module


4.38.4 (2020-08-03)
-------------------

- ZON-5981: Restrict retract/delete for authors to producing

- FIX: Catch vgwort connection errors, raising a TechnicalError


4.38.3 (2020-07-31)
-------------------

- BUG-1205: Prevent creating several <br> when pressing enter in content-editable


4.38.2 (2020-07-29)
-------------------

- WOMA-133: Fetch ingredient units from configuration file

- ZON-6041: Add campaign parameters to twitter/facebook push URLs

- ZON-6006: Add article main image url to volume toc.csv


4.38.1 (2020-07-28)
-------------------

- BUG-1255: Prevent adding the same author to an article twice


4.38.0 (2020-07-28)
-------------------

- ZON-6037: Introduce zeit.zett.interfaces.IZTTContent

- ZON-5959: Implement querying HDok for blacklisted entries


4.37.2 (2020-07-28)
-------------------

- MAINT: Make date_print_published writeable via admin tab


4.37.1 (2020-07-24)
-------------------

- FIX: Import necessary packages for pembeds


4.37.0 (2020-07-24)
-------------------

- WOMA-111: Provide plural property from ingredients whitelist

- MAINT: Support variables in pembed parameter definitions


4.36.7 (2020-07-23)
-------------------

- WOMA-141: Update portion range validation for servings


4.36.6 (2020-07-20)
-------------------

- WOMA-136_2: Update list of ingredient units

- WOMA-137: Allow duplicate ingredients in recipe list module


4.36.5 (2020-07-14)
-------------------

- FIX: Handle zope.interface now inheriting getTaggedValues(),
  which broke IBreakingNews type/token in the AddableCMSContentTypeSource


4.36.4 (2020-07-13)
-------------------

- MAINT: Make forward-compatible with zope.interface-5.0


4.36.3 (2020-07-10)
-------------------

- WOMA-96: Don't change access for non performing articles in channel 'wochenmarkt'

- FIX: Remove optional chaining for better browser support

- WOMA-136: Update list of ingredient units


4.36.2 (2020-07-08)
-------------------

- WOMA-126: Remove duplicates in recipe from ES payload.

- WOMA-130: Use ids for ingredient units


4.36.1 (2020-07-07)
-------------------

- FIX: Make `available` work for article modules


4.36.0 (2020-07-03)
-------------------

- ZON-5643: Quote users comments in article


4.35.3 (2020-07-02)
-------------------

- WOMA-116: Validate servings to allow a portion range


4.35.2 (2020-07-02)
-------------------

- WOMA-4: Add defaults for ingredient amount and unit.

- WOMA-115: Add free text details to ingredients in recipelist

- WOMA-120: Add new values to ingredient unit list


4.35.1 (2020-06-30)
-------------------

- MAINT: Ensure we don't use browser-specific directives in
  non-browser ZCML files

- WOMA-99: Polish recipelist module


4.35.0 (2020-06-25)
-------------------

- WOMA-114: Read ingredient and category names from whitelist
  instead of article xml

- WOMA-108: Add ingredientdice article module


4.34.3 (2020-06-24)
-------------------

- MAINT: Derive WOMA whitelists from z.c.c.sources.CachedXMLBase


4.34.2 (2020-06-23)
-------------------

- STO-49: Use default filename mechanics for z.c.cp.TopicpageFilterSource as well


4.34.1 (2020-06-22)
-------------------

- BUG-1247: Fix toc listing content type filter

- MAINT: Move browser imports from zeit.wochenmarkt to zeit.wochenmarkt.browser


4.34.0 (2020-06-18)
-------------------

- STO-49: Support setting a default filename for source config files


4.33.5 (2020-06-18)
-------------------

- MAINT: Remove unused imports


4.33.4 (2020-06-17)
-------------------

- WOMA-66: Add recipe categories to articles

- WOMA-103: Add checkbox to instruct merging multiple recipe list modules

- WOMA-104: Add subheading to recipe list

- WOMA-85: Extract recipe attributes and write it to destination fields in
  ElasticSearch

- STO-49: Support setting a default filename for source config files


4.33.3 (2020-06-09)
-------------------

- OPS-1214: No longer update zeit.cms.relation "who references whom" index


4.33.2 (2020-06-04)
-------------------

- MAINT: Sort teaser formgroup below options in article editor


4.33.1 (2020-06-04)
-------------------

- ZON-5861: Remove `commentsAPIv2` property from `ICommonMetadata`

- BUG-1216: Allow referencing gallery objects in article topicbox module


4.33.0 (2020-05-29)
-------------------

- WOMA-65: Introduce module: recipe list
- MAINT: Log hdok create calls


4.32.11 (2020-05-27)
--------------------

- MAINT: Sort access above authors in article form


4.32.10 (2020-05-25)
--------------------

- PY3: Make workflow timing logging work under py3


4.32.9 (2020-05-25)
-------------------

- FIX: Just filter frame-less renditions completely


4.32.8 (2020-05-25)
-------------------

- PY3: Be defensive about brightcove renditions without frame size


4.32.7 (2020-05-19)
-------------------

- PY3: Fix text/bytes handling in DAV property parsing


4.32.6 (2020-05-18)
-------------------

- ZON-5886: Make FluentRecordFormatter py3-compatible


4.32.5 (2020-05-11)
-------------------

- ZON-5758: Display hdok result list even if there's only one match,
  since the new name could be a single-hit-substring of an existing name


4.32.4 (2020-05-11)
-------------------

- IR-51: Translate filter values

- MAINT: Update to changed hdok create API yet again


4.32.3 (2020-05-11)
-------------------

- ZON-5869: Add manual link to article embed form


4.32.2 (2020-05-08)
-------------------

- BUG-1238: Fix volume zplus webtrekk query


4.32.1 (2020-05-06)
-------------------

- ZON-5758: Make IAuthor.status optional


4.32.0 (2020-05-05)
-------------------

- ZON-4945: Provide TMSContentQuery._fetch() extension point for zeit.web


4.31.3 (2020-05-05)
-------------------

- MAINT: Don't break when running test in zeit.web, when pytest option
  `--visible` will be added by both vivi.core and zeit.web


4.31.2 (2020-05-05)
-------------------

- WOMA-68: Set IAuthor.is_author use_default=True


4.31.1 (2020-05-04)
-------------------

- IR-51: Volume table of contents


4.31.0 (2020-04-29)
-------------------

- IR-73: Look up author in HDok before creating it in vivi


4.30.3 (2020-04-28)
-------------------

- ZON-5869: Update social embed wording


4.30.2 (2020-04-28)
-------------------

- BUG-1234: Ignore `DeleteProperty` in tms reindex


4.30.1 (2020-04-27)
-------------------

- BUG-1234: Handle security properly in "re-report to vgwort" view


4.30.0 (2020-04-23)
-------------------

- ZON-5728: Upgrade to selenium-3.x with geckodriver


4.29.2 (2020-04-03)
-------------------

- MAINT: Update wording of IConsentInfo.thirdparty_vendors (via @holger)


4.29.1 (2020-04-02)
-------------------

- OPS-1192: Replace stdlib cookie parser with webob,
  so it doesn't break on non-ASCII characters


4.29.0 (2020-03-27)
-------------------

- ZON-5447: Generalize vendor source API to access all config attributes


4.28.0 (2020-03-23)
-------------------

- ZON-5488: Provide IConsentInfo also for z.c.article.IRawXML


4.27.0 (2020-03-16)
-------------------

- MAINT: Use JWT for our "SSO" cookie


4.26.5 (2020-03-12)
-------------------

- WOMA-33: Add cook ability  to authors.


4.26.4 (2020-03-11)
-------------------

- ZON-5635: Handle updates from Brightcove for teaser images


4.26.3 (2020-03-09)
-------------------

- ZON-5635: Put importing video images behind feature toggle
  ``video_import_images``


4.26.2 (2020-03-09)
-------------------

- BUG-1207: Don't try to write DAV cache in webhook notify job

- PY3: Fix text/bytes handling in zeit.connector.filesystem


4.26.1 (2020-03-04)
-------------------

- BUG-1205: Revert bugfix 4.25.15, it causes a different misbehaviour

- ZON-5635: Add teaser images for videos as CMS content


4.26.0 (2020-02-18)
-------------------

- OPS-786: Extract fluent logging helper so zeit.web can reuse it


4.25.15 (2020-02-14)
--------------------

- ZON-5651 etc: Make zeit.edit, zeit.vgwort py3 compatible

- BUG-1205: Remove obsolete browser workaround that inserted
  an additional br element in article editor.


4.25.14 (2020-02-07)
--------------------

- ZON-5679 etc: Make packages py3 compatible:
  z.c.article, cp, dynamicfolder, gallery, image, modules,
  zeit.retresco, wysiwyg

- FIX: Remove influxdb remnants (4.25.10)


4.25.13 (2020-02-03)
--------------------

- HOTFIX: Explicitly specify UTF8 as our encoding


4.25.12 (2020-02-03)
--------------------

- ZON-5659: Use bytes for resource body in z.c.text
  so it conforms to the zeit.connector behaviour


4.25.11 (2020-01-31)
--------------------

- FIX: Turns out zope.app.folder is not a ui-only dependency


4.25.10 (2020-01-31)
--------------------

- ZON-5653: Make zeit.connector, zeit.imp, zeit.content.volume py3 compatible

- OPS-908: Remove notifying influxdb for pushes, has been replaced
  by grafana


4.25.9 (2020-01-30)
-------------------

- BUG-1206: Restrict product-related vgwort author fallback to
  articles without agencies

- ZON-5649 etc: Make packages py3 compatible:
  zeit.cms, zeit.workflow, zeit.find, z.c.author, text, link

- FIX: Index in ES after marking an article as vgwort-todo


4.25.8 (2020-01-20)
-------------------

- BUG-1199: Patch bug in zeep SOAP client so it serializes agency
  authors (only code, no firstname/lastname) correctly

- FIX: Add missing import, log end of vgwort report job

- FIX: Don't double-b64encode vgwort text


4.25.7 (2020-01-07)
-------------------

- FIX: Make xmldiff work with objectify for further cases


4.25.6 (2020-01-07)
-------------------

- ZON-5693: Try different MDB fields for copyright


4.25.5 (2020-01-07)
-------------------

- FIX: Add missing import

- MAINT: Remove obsolete IArticle.layout property


4.25.4 (2020-01-06)
-------------------

- ZON-5645: Make source-code (hopefully) py3 compatible

- ZON-5771: Make RTE toolbar compatible for Google Chrome

- FIX: Make xmldiff work with objectify



4.25.3 (2019-12-18)
-------------------

- OPS-1163: Remove connector lockinfo cache


4.25.2 (2019-12-17)
-------------------

- MAINT: Display different vivi logo on loginform too


4.25.1 (2019-12-17)
-------------------

- MAINT: Display different vivi logo in staging


4.25.0 (2019-12-16)
-------------------

- ZON-5560: Implement `Animation` content type

- ZON-5590: Remove z3c.conditionalviews

- ZON-5748: Replace xml_compare with xmldiff

- MAINT: Update wording of IConsentInfo.thirdparty_vendors (via @milan)


4.24.1 (2019-12-10)
-------------------

- HOTFIX: Don't require special permission to add embed when toggle is off


4.24.0 (2019-12-09)
-------------------

- ZON-5694: Implement NewsletterSignup Module


4.23.2 (2019-12-09)
-------------------

- FIX: Declare dependency that friedbert-preview needs


4.23.1 (2019-12-09)
-------------------

- ZON-5594: Honor separated UI dependencies by not needlessly importing UI code


4.23.0 (2019-12-06)
-------------------

- ZON-5586: Finally remove unused XMLSnippet field (since zeit.cms-2.35.1)

- ZON-5585: Replace SilverCity with Pygments for syntax highlighting

- ZON-5603: Replace suds with zeep as our SOAP client library

- ZON-5615: Require special permission to add embed objects,
  set feature toggle `add_content_permissions` to enable

- ZON-5615: Removed inline code entry from rawtext module

- ZON-5593, ZON-5594: Declare test-only and UI dependencies separately


4.22.3 (2019-11-26)
-------------------

- BUG-1136: Don't show admin checked-out for objects without ICommonMetadata,
  implement a basic SEO tab for them.


4.22.2 (2019-11-22)
-------------------

- BUG-1156: Only count teasers, not all modules when adjusting auto block count
  (reprise of 4.17.4)


4.22.1 (2019-11-22)
-------------------

- FIX: Restore translations that were lost in 4.22.0

- MAINT: Also pre-warm folder entries


4.22.0 (2019-11-21)
-------------------

- ZON-5614: Make social embed labels and texts more explainable

- ZON-5472: Add `IAuthor.show_letterbox_link` field


4.21.7 (2019-11-15)
-------------------

- MAINT: Apply enrich toggle also on publish


4.21.6 (2019-11-15)
-------------------

- MAINT: Add feature toggle `tms_enrich_on_checkin` so we can disable
  it in overload situations


4.21.5 (2019-11-15)
-------------------

- OPS-1133: Modify DAV cache conflict resolution rules
  to avoid deleting cache entries (doing that was definitely correct,
  but it caused thundering herd issues e.g. for often-used folders)
  Set feature toggle `dav_cache_delete_property_on_conflict` (or `childname`)
  to revert to the previous behaviour.


4.21.4 (2019-11-13)
-------------------

- HOTFIX: brown-bag 4.21.3 due to syntax error


4.21.3 (2019-11-13)
-------------------

- OPS-1133: Don't write traceback into the property cache anymore


4.21.2 (2019-11-13)
-------------------

- OPS-1133: Write the traceback into the property cache


4.21.1 (2019-11-12)
-------------------

- ZON-5473: Set force_mobile_image=True for gallery teasers

- OPS-1133: More diagnostics for DAV cache deletes


4.21.0 (2019-11-11)
-------------------

- OPS-1133: Implement a DAV cache (properties and childnames) with
  dogpile/redis as the storage backend


4.20.5 (2019-11-08)
-------------------

- OPS-1133: Allow setting a connector referrer for non-http requests


4.20.4 (2019-11-06)
-------------------

- OPS-1133: More diagnostics for DAV cache deletes


4.20.3 (2019-11-05)
-------------------

- OPS-1133: Add diagnostics to DAV cache deletes


4.20.2 (2019-10-29)
-------------------

- MAINT: Put article image `animation` behind feature toggle `article_image_animation`


4.20.1 (2019-10-25)
-------------------

- FIX: Set dlps to dlp instead of yet another separate "now"


4.20.0 (2019-10-23)
-------------------

- ZON-5447: Translate vendor IDs to external CMP values


4.19.0 (2019-10-22)
-------------------

- ZON-5523: Add additional amp_code field to embeds


4.18.0 (2019-10-22)
-------------------

- ZON-5464: Add `animation` field to article image module

- OPS-1133: Add diagnostics to DAV cache conflict resolution


4.17.5 (2019-10-02)
-------------------

- BUG-1156: Roll back change for now, it breaks autopilots


4.17.4 (2019-10-02)
-------------------

- BUG-1156: Only count teasers, not all modules when adjusting auto block count


4.17.3 (2019-10-02)
-------------------

- BUG-1155: Display topiclink fields below each other in area edit form


4.17.2 (2019-10-02)
-------------------

- ZON-5432: Provide agencies in ITMSContent


4.17.1 (2019-09-26)
-------------------

- ZON-5480: Store mime type in a location that's actually writeable


4.17.0 (2019-09-26)
-------------------

- ZON-5480: Make mime type editable for text objects


4.16.1 (2019-09-25)
-------------------

- MAINT: Make article module library configurable just like CP


4.16.0 (2019-09-24)
-------------------

- ZON-5490: Add module to embed thirdparty content by pasting an URL

- OPS-1116: Add an explicit commit to separate the two retresco files


4.15.7 (2019-09-19)
-------------------

- ZC-450: Remove diagnostics, we found out what we needed


4.15.6 (2019-09-19)
-------------------

- ZC-450: More diagnostics


4.15.5 (2019-09-19)
-------------------

- ZC-450: Add diagnostics to the requests timeout signal handler setup


4.15.4 (2019-09-17)
-------------------

- FIX: Make admin form work for articles again after 4.8.4


4.15.3 (2019-09-16)
-------------------

- FIX: Require CMP vendors to be unique


4.15.2 (2019-09-16)
-------------------

- ZON-5453: Use dropdown instead of checkbox widget for CMP vendors

- FIX: Put display of CMP fields behind feature toggle as well


4.15.1 (2019-09-12)
-------------------

- HOTFIX: Fix error in author object-details view
  (wrong source base class)


4.15.0 (2019-09-11)
-------------------

- ZON-5488: Implement IConsentInfo for the rawtext module

- ZON-5483: Allow configuring which authorship roles to report to vgwort

- FIX: Don't break when creating a volume without a `centerpage` setting

- MAINT: Don't show supertitle in volume toc


4.14.0 (2019-09-05)
-------------------

- ZON-5453: Add dropdown with `IConsentInfo.has_thirdparty` to embed form

- ZON-5447: Add multiselect with `IConsentInfo.thirdparty_vendors` to embed form


4.13.0 (2019-09-04)
-------------------

- FIX: Display label "Author" when role is None

- MAINT: Move runtime feature toggle source here from zeit.web

- MAINT: Put `agencies` field on article UI behind feature toggle


4.12.2 (2019-09-04)
-------------------

- ZON-5394: Do not report authorships with role to vgwort


4.12.1 (2019-09-03)
-------------------

- OPS-1106: Switch vgwort report to query elasticsearch instead of queryserver


4.12.0 (2019-08-29)
-------------------

- ZON-5432: Add value `Agentur` to `IAuthor.status` source;
  add `ICommonMetadata.agencies` field;
  add `IAuthor.initials` field


4.11.1 (2019-08-27)
-------------------

- ZON-5394: Styling to put role field on the same line as location


4.11.0 (2019-08-27)
-------------------

- ZON-5394: Add IAuthorReference.role field


4.10.0 (2019-08-26)
-------------------

- ZON-5376: Add `IArticle.prevent_ligatus_indexing` property


4.9.4 (2019-08-09)
------------------

- BUG-1101: Fix CSS for "to top" link


4.9.3 (2019-08-09)
------------------

- BUG-1094: Retrieve the number of actually available hits if a TMS/ES
  query hits the configured ES result limit.


4.9.2 (2019-08-09)
------------------

- ZON-5338: Explicitly set defaults declared in IVideo during BC-import

- ZON-5380: Add "access" filter to search form

- ZON-5378: Display the embed name instead of its raw code in CP editor

- ZON-5321: Make article ITopicbox.supertitle required

- ZON-5241: Update to changed zope.viewlet sorting behaviour


4.9.1 (2019-08-08)
------------------

- HOTFIX: Fix paragraph handling after beautifulsoup udpate


4.9.0 (2019-08-05)
------------------

- IR-163: Add preview link to volume toc

- IR-68: Support importing image group images (and minimal metadata)
  via drag&drop from the IR MDB UI

- MAINT: Revert __name__ handling from 4.8.3, Producing members often
  massage the source code to fix formatting issues, and these
  attributes get in the way of that


4.8.4 (2019-07-30)
------------------

- HOTFIX: Fix typo in admin "checked-in" form

- HOTFIX: Not all ressorts in TOC now come from k4 anymore


4.8.3 (2019-07-29)
------------------

- MAINT: Keep __name__ attributes in article


4.8.2 (2019-07-29)
------------------

- FIX: Exclude temporary articles from checkin webhooks


4.8.1 (2019-07-29)
------------------

- IR-95: Add hdok id to ICommonMetadata.authorships XML reference

- IR-41: Add `has_audio` field to the checked-out admin form


4.8.0 (2019-07-25)
------------------

- IR-71: Add IAuthor.honorar_id

- MAINT: Increase favicon resolution


4.7.0 (2019-07-17)
------------------

- IR-54: Also allow IR article_id, not just uuid to query the lock status


4.6.3 (2019-07-11)
------------------

- ZC-90: Move field to activate new comments backend to article form


4.6.2 (2019-07-10)
------------------

- BUG-1074: Index TMS on rename


4.6.1 (2019-07-10)
------------------

- BUG-1069: Don't index imagegroup or gallery thumbnail images in TMS

- FIX: Don't try to nonexistent content in TMS re-enrich hook

- IR-142: Also collect articles imported from InterRed for volume table of contents


4.6.0 (2019-07-10)
------------------

- ZON-5239: Topicbox improvments

- ZON-5291: Rename content marketing teaser adplace

- ZON-5347: Set 'is_amp' default to true

- BUG-1121: Enable RSS-Teaser objects as lead candidate


4.5.5 (2019-07-08)
------------------

- FIX: Fix volume title listing breaking with non ascii char


4.5.4 (2019-07-05)
------------------

- BUG-1096: Allow storing `False` for embed parameters with default=True


4.5.3 (2019-07-04)
------------------

- IR-67: Display different error for still published objects when lock is set


4.5.2 (2019-07-04)
------------------

- FIX: Use correcter syntax for tags in push to influxdb


4.5.1 (2019-07-04)
------------------

- MAINT: Exclude connector test content from released egg


4.5.0 (2019-07-04)
------------------

- IR-66: Retry webhook on errors

- IR-67: Add `locked` flag to workflow info that prevents publishing


4.4.1 (2019-07-03)
------------------

- FIX: Use correct syntax for tags in push to influxdb

- MAINT: Send info about UA pushes to both grafana and influxdb,
  so we can hopefully shut down the influxdb soon


4.4.0 (2019-06-20)
------------------

- MAINT: Add linkSource (mostly for pembeds)


4.3.0 (2019-06-12)
------------------

- ZON-4585: Add topiclink fields to areas


4.2.0 (2019-06-06)
------------------

- ZON-5260: Add background color to cardstacks

- MAINT: Clean up whitespace from rss feeds


4.1.0 (2019-06-03)
------------------

- IR-77: Add `mdb_id` field to images

- IR-77: Add `setup_timebased_jobs` xmlrpc method

- PERF: Determine image mime type only on demand, not always upfront on resolve


4.0.5 (2019-05-22)
------------------

- FIX: Exclude rss teaser from referenced cp content


4.0.4 (2019-05-20)
------------------

- IR-36: Notify checkin webhooks also for newly created objects

- FIX: Declare brightcove console script properly


4.0.3 (2019-05-16)
------------------

- IR-59: Allow configuring excludes for checkin webhook


4.0.2 (2019-05-08)
------------------

- FIX: Fix xml.zeit.de being able to render rss feed objects


4.0.1 (2019-05-02)
------------------

- FIX: Fix RSS Content query breaking hide dupes clause


4.0.0 (2019-04-29)
------------------

- Initial monorepo release.
