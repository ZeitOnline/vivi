vivi.core changes
=================

.. towncrier release notes start

5.47.0 (2023-10-24)
-------------------

- ZO-3998: Check if publish dependencies can be published before publishing them

- ZO-4019: Simplecast event 'Update Episode' can create a new episode if the episode does not exist

- ZO-4057: Make DAV body cache blob threshold configurable


5.46.0 (2023-10-20)
-------------------

- ZO-4055: Log stack trace of nested publish errors, don't swallow them inside MulitPublishError


5.45.0 (2023-10-18)
-------------------

MAINT:
- Remove obsolete feature toggle push_airship_com/eu, eu is the production default for quite some time now


5.44.0 (2023-10-18)
-------------------

MAINT:
- Remove unused sourcepoint js file import


5.43.0 (2023-10-17)
-------------------

- ZO-3997: restrict retract and delete permissions for audio


5.42.0 (2023-10-17)
-------------------

- ZO-3846: ensure podcast episode type is always 'podcast'


5.41.0 (2023-10-16)
-------------------

- ZO-3996: Import simplecast updated timestamp as last_semantic_change


5.40.0 (2023-10-16)
-------------------

- ZO-4017: Collect metric for available kpi values in TMS


5.39.0 (2023-10-12)
-------------------

- ZO-3579: Record external podcast id


5.38.0 (2023-10-12)
-------------------

MAINT:
- Unconditionally record DAV spans


5.37.0 (2023-10-12)
-------------------

- ZO-3987: Create ZODB connection only after fork


5.36.0 (2023-10-11)
-------------------

- ZO-147: Support repoze.vhm instead of requiring vh traverser


5.35.0 (2023-10-11)
-------------------

- ZO-3824: Fix simplecast webhook body tracing


5.34.0 (2023-10-11)
-------------------

- ZO-1939: Flatten all XML mixed content cases


FIX:
- Restore display of publish-state circle in directory listings


5.33.0 (2023-10-10)
-------------------

- ZO-1939: Send properties and body as json to bigquery, when toggle 'publish_bigquery_json' is set


5.32.1 (2023-10-10)
-------------------

- ZO-3978: Include test config files in release, since zeit.web uses them


5.32.0 (2023-10-10)
-------------------

- ZO-3960: Apply free/dynamic access toggle only to articles


5.31.6 (2023-10-10)
-------------------

- ZO-3824: add http.body of simplecast webhook to tracing


5.31.5 (2023-10-09)
-------------------

MAINT:
- Update ZEO instrumentation to 5.4 API


5.31.4 (2023-10-09)
-------------------

- ZO-3822: implement retract for audio objects

- ZO-3846: show details about the audio element inside the article


FIX:
- Increase size for article landing zone

- align details heading and publish state vertically

- move 'remove'-button for object references to prevent preview and cms button being on top of each other


MAINT:
- Update dependencies


5.31.3 (2023-09-28)
-------------------

- MAINT: Run tests on multiple cores.

- ZO-3822: implement publish for audio objects

- ZO-3851: refactor simplecast requests

- ZO-3933: podigee_id attribute to podcast source, ensure parallel operation of podcast hosts


5.31.2 (2023-09-25)
-------------------

- ZO-3771: Set audio_type during import

- ZO-3821: Display title in audio object details


5.31.1 (2023-09-22)
-------------------

- ZO-3771: Improve Audio object layout in code

- ZO-3821: Audio objects provide ICommonMetadata, so they are indexed in TMS


5.31.0 (2023-09-20)
-------------------

- ZO-3844: Move audio form below teaser form

- ZO-3845: Add audio module for article body


5.30.4 (2023-09-15)
-------------------

- ZO-3771: Add series subtitle and description to audio object


5.30.3 (2023-09-14)
-------------------

- ZO-3770: added new properties to audio interface

- ZO-3771: Add distribution channels to audio object for spotify, google etc.


FIX:
- ZO-3814: layout fix for topiclinks and teaser landing zone


MAINT:
- MAINT: Refactor simplecast celery tasks and clean up imports


5.30.2 (2023-09-11)
-------------------

- ZO-215: Restore edit tab with landing zone for teaser modules


5.30.1 (2023-09-11)
-------------------

- ZO-3759: offer uuid for urbanairship payload


5.30.0 (2023-09-08)
-------------------

- ZO-3782: Transmit samplerate for downsampled modules


5.29.15 (2023-09-07)
--------------------

- ZO-215: Add a content landing zone to the edit tab of local-teaser


5.29.14 (2023-09-06)
--------------------

- ZO-3744: Move simplecast webhook duties to celery tasks


5.29.13 (2023-09-06)
--------------------

- ZO-3758: Remove fb library remnants


5.29.12 (2023-09-06)
--------------------

- ZO-3578: Simplecast audios are automatically saved in the correct folder

- ZO-3758: Allow configuring facebook graph api version


FIX:
- ZO-3438: correct id type for opentelemetry span to avoid errormessages in logs


5.29.11 (2023-08-31)
--------------------

- ZO-215: Switch teaser block UI to single referenced content instead of list

- ZO-3629: Log all errors (e.g. locking, not just publisher) on multi publish origin

- ZO-3708: add social push messages to article validation


FIX:
- Improve layout for error messages

  - now the box and the arrow below point directly at the widget
  - when more than one message appears, the message no longer shifts


5.29.10 (2023-08-29)
--------------------

- ZO-3662: Use correct dict entries


5.29.9 (2023-08-28)
-------------------

- ZO-3662: Add more logging


5.29.8 (2023-08-28)
-------------------

- ZO-3662: Update event names


5.29.7 (2023-08-25)
-------------------

- ZO-3718: Save podcast episodes in new folder


5.29.6 (2023-08-25)
-------------------

- ZO-3576: Ensure audio works

- ZO-3661: Connect to simplecast api

- ZO-3662: Create/update/delete Audio objects via webhook


5.29.5 (2023-08-11)
-------------------

FIX:
- ZO-3671: author ssoid is too big


5.29.4 (2023-08-08)
-------------------

- ZO-3578: Bump webhook log level to info


5.29.3 (2023-08-04)
-------------------

- ZO-2997: Redirect from repository to workingcopy if one exists for all content types


5.29.2 (2023-08-04)
-------------------

- ZO-3175: Move comment options into their own form group

- ZO-3576: Add Audioobjekt

- ZO-3578: Add Simplecast webhook(s)


5.29.1 (2023-08-02)
-------------------

- ZO-3188: Restrict publish/retract of folders to producing

- ZO-3449: Support searching for videos from e.g. Animation object

- ZON-2996: Hide delete menu item when prohibited, instead of requiring opening the popup first


5.29.0 (2023-07-28)
-------------------

MAINT:
- Switch to PEP420 namespace packages


5.28.2 (2023-07-24)
-------------------

- ZO-3550: Implement path prefix exclude for checkin webhook

- ZO-3568: Improve publish error handling


5.28.1 (2023-07-21)
-------------------

- ZO-1949: no need to post uuid and uniqueId generally and in service payload


5.28.0 (2023-07-20)
-------------------

- ZO-3262: Set target for RSS feed links (wiwo parquet)


MAINT:
- Move request timeout handling into zeit.cms instead of zeit.retresco


5.27.7 (2023-07-11)
-------------------

- ZO-3478: Reimplement as a single DAVProperty, so zeit.contentquery still works


5.27.6 (2023-07-10)
-------------------

- ZO-2613: Remove rotterdam skin


5.27.5 (2023-07-06)
-------------------

- ZO-3478: Introduce toggle `access_treat_free_as_dynamic`


5.27.4 (2023-07-03)
-------------------

- ZO-3172: Update Twitter API to v2


5.27.3 (2023-06-30)
-------------------

- ZO-2483: ignore 3rd party services list as parameter for publisher


5.27.2 (2023-06-30)
-------------------

- ZO-2683: Add checksum to Speechbert payload


5.27.1 (2023-06-23)
-------------------

- ZO-3452: No longer publish Video objects on checkin


5.27.0 (2023-06-22)
-------------------

- ZO-2808: display teaser preview for markup in centerpage
  ZO-2808: display markup preview in folder list view

- ZO-3415: Collect text of nested tags for speechbert payload

- ZO-3443: Update to sqlalchemy-2 API


5.26.13 (2023-06-20)
--------------------

MAINT:
- Log debug timing for new publisher


5.26.12 (2023-06-19)
--------------------

- ZO-3351: Update keywords during publish, to support "checkin+publish immediately" usecase


5.26.11 (2023-06-16)
--------------------

- ZO-3351: Revert asynchronous to synchronous tasks during checkout/publish


5.26.10 (2023-06-14)
--------------------

- ZO-3351: fix race condition for asynchronous index tasks on publish

- ZO-3394: Vivi devel should have its own logo


5.26.9 (2023-06-12)
-------------------

FIX:
- ZO-3351: Revert lock and unlock for every function that requires the lock


5.26.8 (2023-06-09)
-------------------

- ZO-3351: lock and unlock for every function that requires the lock


5.26.7 (2023-06-08)
-------------------

- ZO-3351: handle checkin before starting the publisher process


FIX:
- ZO-3351: Revert zeit.connector property update should invalidate cache


5.26.6 (2023-06-08)
-------------------

FIX:
- ZO-3351: zeit.connector property update should invalidate cache


5.26.5 (2023-06-07)
-------------------

- ZO-3364: Renames 'AnimatedHeader' modul to 'Animation'


5.26.4 (2023-06-06)
-------------------

- ZO-3351: revert sleep before publish, because it is not working


5.26.3 (2023-06-06)
-------------------

FIX:
- ZO-3351: Educated guess, wait for checkin completion before publish to avoid race condition


5.26.2 (2023-05-30)
-------------------

- ZO-1992: Control publish to tms in vivi


5.26.1 (2023-05-23)
-------------------

- ZO-2452: Add animation to article header module


5.26.0 (2023-05-22)
-------------------

MAINT:
- Separate forked dependency declarations per extra


5.25.1 (2023-05-17)
-------------------

- ZO-3159: Ignore news articles in speechbert


5.25.0 (2023-05-12)
-------------------

- ZO-3245: Use pure python mime detection library


5.24.1 (2023-05-12)
-------------------

- ZO-2808: Rename 'Markup Inhalt' to 'Markup' & and Markup to Typ Filter

- ZO-2874: Changed strategy to handle quotes in articles


5.24.0 (2023-05-02)
-------------------

MAINT:
- MAINT: Update to current opentelemetry sqlalchemy API


5.23.9 (2023-04-28)
-------------------

- ZO-3164: Record vivi_facebook_token_expires_timestamp_seconds metric


5.23.8 (2023-04-25)
-------------------

- ZO-2850: Add IArticle.comments_sorting


FIX:
- ZO-3028: import entity type for topicpages


5.23.7 (2023-04-19)
-------------------

- ZO-1642: Support available for series source


5.23.6 (2023-04-14)
-------------------

- ZO-2032: Provide ICommonMetadata attributes even if article ref is broken

- ZO-2555: view for csv download of images with single purchase

- ZO-2757: avoid failures if missing unimportant informations; different datetime


5.23.5 (2023-04-11)
-------------------

- ZO-2417: Enable Animation.genre attribute


MAINT:
- Add environment label to importer metrics


5.23.4 (2023-03-31)
-------------------

- ZO-2775: Record user and client ip for tracing

- ZO-2846: Fix cronjob config parsing

- ZO-2856: Remove slug from Speechbert image URL


5.23.3 (2023-03-15)
-------------------

- ZO-2655: CSV with invalid Authors (gcids) as browser view instead of mail


FIX:
- ZO-2757: FIX: uri paramamteter for tagesschau request includes www.zeit.de


5.23.2 (2023-03-06)
-------------------

- ZO-2463: Include all necessary otlp exporter dependencies


5.23.1 (2023-03-06)
-------------------

- ZO-2552: New content object markup for das wichtigste in kuerze

- ZO-2716: Export incoming http requests as traces


5.23.0 (2023-02-22)
-------------------

- ZO-2645: Add IAnimation.gallery field


5.22.19 (2023-02-21)
--------------------

- ZO-2132: Don't break on empty nodes


5.22.18 (2023-02-21)
--------------------

- ZO-2672: Log TMS reindex in objectlog


5.22.17 (2023-02-21)
--------------------

- ZO-2132: Normalize quotes to angled instead of inch if toggle `normalize_quotes` is set


5.22.16 (2023-02-20)
--------------------

FIX:
- ZO-2522: Fix speechbert namespace


5.22.15 (2023-02-17)
--------------------

- ZO-2522: Use checksome to validate speechbert audio against article text


5.22.14 (2023-02-14)
--------------------

- ZO-2233: Fix retract cronjob entrypoint principal


5.22.13 (2023-01-25)
--------------------

- ZO-2498: Add two new topiclink_[url|label] fields to centerpages


5.22.12 (2023-01-24)
--------------------

- ZO-2233: Fix cronjob entrypoint principal


5.22.11 (2023-01-24)
--------------------

- ZO-2233: Fix configuration parsing when there are no additional HTTP headers


5.22.10 (2023-01-13)
--------------------

- ZO-2233: Implement AdDefend JS-Code as vivi object


5.22.9 (2023-01-12)
-------------------

- ZO-2136: Don't display spurious "updated on" notifications on article forms after saving


5.22.8 (2023-01-11)
-------------------

- ZO-2136: Fix brown-bag release


5.22.7 (2023-01-11)
-------------------

- ZO-2136: Move UI-only exception to browser package


5.22.6 (2023-01-11)
-------------------

- ZO-2136: render error message for users for no tagesschau recommendations


5.22.5 (2023-01-05)
-------------------

- ZO-2388: Remove christmas tree and spirit


5.22.4 (2023-01-04)
-------------------

FIX:
- ZO-1847: Seriesheader preview should not cover Vivi UI


5.22.3 (2022-12-23)
-------------------

MAINT:
- Update python libraries


5.22.2 (2022-12-15)
-------------------

- ZO-2324: Switch container registry


5.22.1 (2022-12-15)
-------------------

- BEM-113: Make overriding toggles for tests work again

- ZO-2226: Display publish date in video selection


5.22.0 (2022-12-08)
-------------------

- BEM-113: Support categorizing feature-toggle.xml with intermediary tags


5.21.12 (2022-11-29)
--------------------

- ZO-2132: Roll back changes, they're causing data loss for some users, even though they use a toggle


5.21.11 (2022-11-24)
--------------------

- ZO-2215: Don't try to reposition the toolbar while the article editor is still initializing


FIX:
- ZO-2104: Mark unstable test as xfail


5.21.10 (2022-11-23)
--------------------

- ZO-1471: No longer copy teaserText to twitter push text (ZO-920)

- ZO-2042: usage of ard sync api


5.21.9 (2022-11-18)
-------------------

- ZO-2132: Normalize quotes to angled instead of inch if toggle `normalize_quotes` is set

- ZO-2179: Prohibit writing the root object to IConnector


5.21.8 (2022-11-16)
-------------------

FIX:
- FIX: Don't immediately break when we encounter a BMP image (even though officically we only support jpg+png)

- Ignore nonexistent GCS blobs during delete


5.21.7 (2022-10-28)
-------------------

FIX:
- rm imported but unused module


5.21.6 (2022-10-21)
-------------------

- ZO-1583: ARD Tagesschau video module


5.21.5 (2022-10-20)
-------------------

- ZO-1998: Support zonaudioapp-id in series.xml


5.21.4 (2022-10-18)
-------------------

- ZO-1428: Index dynamic folders in TMS, as publisher requires it


5.21.3 (2022-10-17)
-------------------

FIX:
- FIX: Be defensive about publisher url config trailing slash


5.21.2 (2022-10-17)
-------------------

- ZO-1420: Specific errors for new publisher


5.21.1 (2022-10-12)
-------------------

MAINT:
- Include currently used vivi version as data-attribute on HTML tag


5.21.0 (2022-10-07)
-------------------

- ZO-1422: Send all dependencies to new publisher

- ZO-1890: Add marker for switching to new comments 'rebrush' frontend

- ZO-1909: Use vivi API in publisher speechbert adapter


5.20.8 (2022-10-04)
-------------------

- ZO-1921: Instrument DAV requests for tracing


5.20.7 (2022-09-28)
-------------------

- ZO-1857: Implement retract with new publisher


MAINT:
- Allow https://www.staging.zeit.de URLs to be adapted to ICMSContent


5.20.6 (2022-09-20)
-------------------

FIX:
- Properly create a non-recording trace span


5.20.5 (2022-09-20)
-------------------

MAINT:
- Only record tracing data if the zeit.connector.postgresql logger is set to debug


5.20.4 (2022-09-15)
-------------------

- ZO-1864: Remove orphaned entries from property cache during invalidate


5.20.3 (2022-09-14)
-------------------

- ZO-1865: Send celery failures to bugsnag


MAINT:
- Update navi topics wording/translations


5.20.2 (2022-09-13)
-------------------

- ZO-1716: Add fields for three liveblogs (title and url) to Centerpage meta infos


MAINT:
- Speed up bw-compat code for image group without master images


5.20.1 (2022-09-13)
-------------------

MAINT:
- Update libraries


5.20.0 (2022-09-12)
-------------------

MAINT:
- Support configuring OTLP headers for tracing


5.19.9 (2022-09-06)
-------------------

FIX:
- Be defensive when no psql binary-types are configured


5.19.8 (2022-09-06)
-------------------

- ZO-1663: Add additional contact fields to author (one for title and one for it's content)


5.19.7 (2022-08-24)
-------------------

- ZO-1472: Also accept vivi.staging as uniqueId

- ZO-1747: Adjust article image variant on checkout if vertical has changed

- ZO-1748: Prevent spurious "None" values in inline forms


5.19.6 (2022-08-23)
-------------------

- ZO-605: Tweak UI wording


5.19.5 (2022-08-22)
-------------------

MAINT:
- MAINT: Update opentelemetry libraries


5.19.4 (2022-08-18)
-------------------

FIX:
- Only consider template objects for UA payload


5.19.3 (2022-08-17)
-------------------

FIX:
- Move contenttype icons into folders where they are included in releases


5.19.2 (2022-08-17)
-------------------

FIX:
- Include content template files in release


5.19.1 (2022-08-17)
-------------------

FIX:
- Apply testing zcml statements only in tests, not always


5.19.0 (2022-08-17)
-------------------

FIX:
- Always include translation in releases


5.18.6 (2022-08-17)
-------------------

- ZO-1408: Implement 3rdparty services for new publisher

MAINT:
- Update python from 3.10.5 to 3.10.6


5.18.5 (2022-08-09)
-------------------

- ZO-1663: Add jabber, pgp, signal and threema to author profiles


5.18.4 (2022-08-01)
-------------------

FIX:
- Be defensive about body=None in sql


5.18.3 (2022-07-28)
-------------------

- ZO-1629: Work around NonRecordingSpan opentelemetry bug


5.18.2 (2022-07-28)
-------------------

MAINT:
- Declare required elasticsearch libary version (belongs to 5.18.0)


5.18.1 (2022-07-28)
-------------------

- ZO-1629: Instrument sql connector for tracing

- ZO-605: Include `consider_for_duplicate` checkbox in area form


5.18.0 (2022-07-27)
-------------------

MAINT:
- Update to non-deprecated elasticsearch API


5.17.8 (2022-07-27)
-------------------

- ZO-1576: Implement hostname denylist for link targets

- ZO-605: Add `consider_for_dupes` flag to exclude area content from duplicate checking


5.17.7 (2022-07-25)
-------------------

- ZO-1298: Remove automatic area lead candidate mechanic

- ZO-1564: Adjust vgwort rights flags


MAINT:
- Publish breaking news banner directly together with its article


5.17.6 (2022-07-21)
-------------------

- ZO-1608: Reconnect to psql on error


5.17.5 (2022-07-21)
-------------------

- ZO-1603: Add "last indexed" field to TMS


5.17.4 (2022-07-18)
-------------------

MAINT:
- Update python libraries


5.17.3 (2022-07-14)
-------------------

- ZO-1564: Add various "rights granted" flags to vgwort report API call


5.17.2 (2022-07-13)
-------------------

- ZO-856: Use non-deprecated jinja API


5.17.1 (2022-07-13)
-------------------

- ZO-633: Optimize sql connector search for uuid


5.17.0 (2022-07-13)
-------------------

- ZO-856: Make compatible with Python-3.10


5.16.14 (2022-07-12)
--------------------

- ZO-1375: Handle queries without search string


5.16.13 (2022-07-12)
--------------------

- ZO-1375: search in configurable fields only to simplify result set


5.16.12 (2022-07-05)
--------------------

- ZO-1550: Remove `breaking_news` flag from facebook push data


5.16.11 (2022-06-29)
--------------------

- ZO-339: Actually allow users with EditEmbed permission to edit embeds


5.16.10 (2022-06-27)
--------------------

FIX:
- FIX: Differentiate missing and empty tag in newsletter.xml config file


5.16.9 (2022-06-24)
-------------------

- ZO-858: Update celery to 5.x


5.16.8 (2022-06-23)
-------------------

- ZO-1351: Publish content to new publisher, if toggle enabled. For development purposes

- ZO-1475: Remove obsolete `IArticle.is_amp` and `IEmbed.amp_code` fields

- ZO-1478: Update Pillow from version 6 to current 9


5.16.7 (2022-06-20)
-------------------

- ZO-1118: More airship error logging fixes


5.16.6 (2022-06-16)
-------------------

- ZO-1118: Fix airship error logging


5.16.5 (2022-06-15)
-------------------

- ZO-1211: Simplify CP metadata form


5.16.4 (2022-06-14)
-------------------

- ZO-1118: Send all push device types in a single request to airship, send to both US and EU instance


5.16.3 (2022-06-02)
-------------------

- ZO-1286: Add status message with total object count


5.16.2 (2022-06-02)
-------------------

- ZO-1261: Remove obsolete field ICommonMetadata.dailyNewsletter

- ZO-1286: Add objectlog entry after dynamic folder contents have been published


5.16.1 (2022-05-30)
-------------------

- ZO-1286: Use already existing `manual` queue for materialize

- ZO-1367: Store body of non-binary objects in SQL instead of GCS

- ZO-1395: No longer publish thumbnail images of imagegroups and galleries


5.16.0 (2022-05-25)
-------------------

- ZO-1261: Remove unused package zeit.newsletter

- ZO-1286: Use dedicated queue for publish as well


5.15.14 (2022-05-25)
--------------------

- ZO-1286: Use a dedicated celery queue for materialize and publish of dynamic folders


5.15.13 (2022-05-24)
--------------------

- ZO-1226: Restore edit link on regions (after 5.15.9)


5.15.12 (2022-05-23)
--------------------

- ZO-1286: Form batches properly

- ZO-1367: Remove unused field IText.encoding


5.15.11 (2022-05-23)
--------------------

- ZO-1094: Validate json against schema given schema url

- ZO-1161: Update advertising translations


5.15.10 (2022-05-18)
--------------------

- ZO-38: Display entity type for tags in repository as well


5.15.9 (2022-05-18)
-------------------

- ZO-1226: Make CP region+area foldable

- ZO-1330: Remove area_color_theme from code

- ZO-1339: Index TMS when workflow properties are edited while checked-in

- ZO-339: Require special permission to check out embed objects (when feature toggle `add_content_permissions` is active)

- ZO-38: Display entity type for tags

- ZO-648: Add checkbox on SEO form to set ISkipEnrich

- ZO-809: Genereate volume TOC for the volume object products, not a global config


5.15.8 (2022-05-17)
-------------------

FIX:
- FIX: Be liberal about `<image/>` in newsletter.xml config file


5.15.7 (2022-05-11)
-------------------

- ZO-1286: Materialize dynamic folder content in batches as well


5.15.6 (2022-05-10)
-------------------

- ZO-721: Ignore obsolete storystream metadata when indexing to TMS


5.15.5 (2022-05-09)
-------------------

- ZO-721: Remove any storystream code


5.15.4 (2022-05-09)
-------------------

- ZO-1286: Actually display the total entry count in the status log message


5.15.3 (2022-05-09)
-------------------

- ZO-114: UI tweaks for Animation object

- ZO-1286: Publish dynamicfolder content in batches


FIX:
- Constrain height of textareas generally again, after 5.15.2


5.15.2 (2022-05-04)
-------------------

FIX:
- Fix height of xml textarea (e.g. when editing feature-toggles)


5.15.1 (2022-05-03)
-------------------

- ZO-121: Add missing translation


5.15.0 (2022-05-02)
-------------------

- ZO-1255: Remove visible_mobile from vivi

- ZO-633: Implement search for postgresql connector


5.14.2 (2022-04-29)
-------------------

- ZO-1212: Improve label and restrict number of characters of area background color field


MAINT:
- Make `available` work for article template header and header color


5.14.1 (2022-04-28)
-------------------

- ZO-121: Make sort order in topicpagelist autoarea work


5.14.0 (2022-04-27)
-------------------

- ZO-1249: Support loading config files given as `http://xml.zeit.de` via connector


5.13.4 (2022-04-26)
-------------------

- ZO-1212: Background color for areas

- ZO-165: Publish dynamic folders without virtual content


5.13.3 (2022-04-14)
-------------------

- ZO-121: Support retrieving all available topicpages (for the register in zeit.web)

- ZO-920: Copy teaserText to twitter push text for genre=nachrichten


5.13.2 (2022-04-14)
-------------------

- ZO-121: Re-add `title` to ITopicpages results (mostly relevant for zeit.web)


5.13.1 (2022-04-13)
-------------------

- ZO-786: Fix GCS upload body size determination


5.13.0 (2022-04-13)
-------------------

- ZO-121: Implement automatic area query source "list of topicpages"


5.12.0 (2022-03-31)
-------------------

- ZO-1132: Add ILink.status_code (301 or 307)


5.11.9 (2022-03-28)
-------------------

- ZO-786: Pass body size to GCS upload, this reduces runtime by 2/3


5.11.8 (2022-03-28)
-------------------

- ZO-815: Properly delete all psql rows


5.11.7 (2022-03-28)
-------------------

FIX:
- Provide consistent Resource/CachedResource API


5.11.6 (2022-03-25)
-------------------

FIX:
- ZO-365: resize uploaded single images


5.11.5 (2022-03-24)
-------------------

- ZO-1113: Change log level


5.11.4 (2022-03-23)
-------------------

- ZO-1108: Support kicker in newslettersignup configuration, too

- ZO-786: Delete GCS blob


5.11.3 (2022-03-21)
-------------------

- ZO-929: Add `genre` and `authorships` to articles via Add-URL


MAINT:
- ZO-541: Remove old newsimport fallbacks


5.11.2 (2022-03-08)
-------------------

FIX:
- Revert merge of ZO-365 (https://github.com/ZeitOnline/vivi/pull/29)6 to unblock master branch


5.11.1 (2022-03-04)
-------------------

- ZO-815: Trigger container image build to fix psycopyg dependency


5.11.0 (2022-03-04)
-------------------

- - ZO-815, ZO-786: First implementation of new storage IConnector


FIX:
- ZO-365: resize uploaded single images


5.10.0 (2022-02-24)
-------------------

- ZO-365: Resize too large images on upload

- ZO-987: Add prefix field to newslettersignups


5.9.4 (2022-02-10)
------------------

MAINT:
- MAINT: Extract ImageGroup.from_image from zeit.brightcove


5.9.3 (2022-02-07)
------------------

- ZO-889: Grant zeit.MoveContent to zeit.CvD


5.9.2 (2022-02-03)
------------------

- ZO-538: Dummy changelog to force container rebuild with current zeit.newsimport release


5.9.1 (2022-02-02)
------------------

MAINT:
- Include the locked uniqueId in publish errormessage


5.9.0 (2022-01-20)
------------------

MAINT:
- Support logging.capture_warnings setting


5.8.1 (2022-01-18)
------------------

- ZO-764: Store local values uniformly in nodes, not attributes


MAINT:
- MAINT: Update to zope.publisher-6.0


5.8.0 (2022-01-14)
------------------

- ZO-764: Implement teaser module that supports local overrides


5.7.7 (2022-01-07)
------------------

- ZO-742: Do not remove XML schema type annotations


5.7.6 (2022-01-05)
------------------

- ZO-731: Add vertical code/ config for ZEIT am Wochenende


5.7.5 (2022-01-04)
------------------

- ZO-303: Download image from BC on update if vivi has no image reference

- ZO-614: Remove unused IVideo.thumbnail

- ZO-616: Delete video still image when video is deleted


5.7.4 (2022-01-04)
------------------

- ZO-727: Don't use a configuration file for image viewports anymore


5.7.3 (2022-01-03)
------------------

- ZO-727: Remove obsolete bw-compat support for "materialized variants"


5.7.2 (2022-01-03)
------------------

MAINT:
- Christmas is over


5.7.1 (2021-12-20)
------------------

MAINT:
- Add christmas logo


5.7.0 (2021-12-17)
------------------

- ZO-697: Use IImages API for video still, make available in TMS


5.6.1 (2021-12-17)
------------------

- ZO-680: Add z.c.article module ITickarooLiveblog.intersection


5.6.0 (2021-12-14)
------------------

- ZO-687: Allow zeit.web to cache content objects with their marker interface assignment included


5.5.3 (2021-12-08)
------------------

MAINT:
- Don't send None to opentelemetry, it doesn't like it


5.5.2 (2021-12-06)
------------------

- ZO-582: Use vivi API for volume toc, this correctly includes author names


5.5.1 (2021-12-01)
------------------

- ZO-143: Add mock connector setup for zeit.web tests


MAINT:
- Clean up XML namespaces and objectify `pytype` on checkin


5.5.0 (2021-11-30)
------------------

- ZO-143: Allow zeit.web to reuse zeit.cms.zope


5.4.11 (2021-11-26)
-------------------

- ZO-585: Report "no thirdparty" for already retracted references


5.4.10 (2021-11-22)
-------------------

- ZO-488: Include interred article-id in volume toc entries

- ZO-555: Add ICommonMetadata.color_scheme

- ZO-566: Add IVideo.type and import from BC custom field


5.4.9 (2021-11-18)
------------------

- ZO-146: Make paste.ini optional for CLI scripts

- ZO-146: Provide entrypoints for various cronjobs


5.4.8 (2021-11-15)
------------------

- ZO-145: Consider zcml.feature settings value (not just exists->true)


5.4.7 (2021-11-12)
------------------

- ZO-303: Use built-in mechanics for publishing image with video


5.4.6 (2021-11-11)
------------------

FIX:
- ZO-496: Prevent reach from cache poisoning vivi cp-editor


5.4.5 (2021-11-10)
------------------

FIX:
- Don't break when changing a template/header of article without an image


5.4.4 (2021-11-05)
------------------

FIX:
- ZO-352: Update libffi6->7


5.4.3 (2021-11-04)
------------------

MAINT:
- ZO-496: Add logging


5.4.2 (2021-11-02)
------------------

MAINT:
- ZO-188: Remove feature toggle


5.4.1 (2021-10-27)
------------------

- ZO-466: Include publisher script here, make configurable via env


5.4.0 (2021-10-26)
------------------

- ZO-441: Support configuring external utilities via settings instead of explicit ZCML includes

- ZO-442: Support setting system principal passwords via settings


5.3.2 (2021-10-21)
------------------

- OPS-1864: Make SSO functionality optional in normal workflows

- ZO-356: Set up logging for non-worker celery commands as well


5.3.1 (2021-10-21)
------------------

- FIX: Provide ZCML context under well-known API, where e.g. CP checkin expects it


5.3.0 (2021-10-19)
------------------

- ZO-356: Configure celery via environment


5.2.0 (2021-10-19)
------------------

- ZO-355: Support configuring product config and zodb via environment


5.1.0 (2021-10-19)
------------------

- ZO-354: Support configuring logging via environment


5.0.1 (2021-10-19)
------------------

- ZO-353: Fix fanstatic wsgi pipeline order


5.0.0 (2021-10-19)
------------------

- ZO-353: Make bugsnag setup reusable
  ZO-353: Support configuring wsgi pipeline stages via combined settings


4.65.1 (2021-10-15)
-------------------

- ZO-286: Materialize dialog and security updates for dynamic folders
  ZO-286: Remote metadata for articles

- ZO-346: Make year optional

- ZO-392: Validate teaser image fields before checkin as well


4.65.0 (2021-10-07)
-------------------

- ZO-142: Implement health check that respects a stopfile


4.64.1 (2021-09-29)
-------------------

- ZO-118: Add provider field to podcast module (on cp and articles)


4.64.0 (2021-09-28)
-------------------

- ZO-142: Support setting celery config file via paste.ini


4.63.6 (2021-09-27)
-------------------

- ZO-62: New entries for volume toc export


4.63.5 (2021-09-20)
-------------------

- ZO-156: Update previously materialized content


4.63.4 (2021-09-14)
-------------------

- ZO-188: Toogle webtrekk cp30 value format for wall status.
- ZO-163: Publish materialized content in dynamic folders


4.63.3 (2021-09-09)
-------------------

- ZO-156: Implement "materialize dynamic folder" UI action



4.63.2 (2021-09-02)
-------------------

- ZO-200: Do not modify rawxml body with DAV properties


4.63.1 (2021-09-02)
-------------------

- ZO-200: Support <rankedTags> in dynamicfolder templates

- ZO-142: Fix `zopeshell myscript.py` handling


4.63.0 (2021-09-02)
-------------------

- ZO-51: Implement "move object" UI action

- ZO-51: Implement "create linkobject" action

- ZO-169: Support `is_news` attribute in products.xml


4.62.0 (2021-08-31)
-------------------

- ZON-6764: Calculate uuid of dynamic folder content from uniqueId

- ZO-142: Provide `@zeit.cms.cli.runner` that wraps `@gocept.runner`
  and retrieves the config file from argv instead of buildout injection


4.61.3 (2021-08-20)
-------------------

- BUG-1430: gracefully handle locked images during brightcove import


4.61.2 (2021-08-20)
-------------------

- ZON-6316: Ensure that the audio_speechbert property occurs in XML


4.61.1 (2021-08-19)
-------------------

- TOPIC-15: Make TMS kpi field names configurable


4.61.0 (2021-08-19)
-------------------

- FIX: Make z.c.cp.BlockLayout default constructor conform to its interface


4.60.3 (2021-08-18)
-------------------

- TOPIC-15: Preserve externally populated `kpi` fields during TMS indexing


4.60.2 (2021-08-05)
-------------------

- TOPIC-42: Fix IndexError when trying to request related topicpages


4.60.1 (2021-08-02)
-------------------

- ZON-6301: Adds checkbox on CPs in SEO tab, to enable RSS-Feed single tracking
- FIX: Do not fail to rerurn related topics if we receive a nonexisting one


4.60.0 (2021-07-28)
-------------------

- TOPIC-39: Hide hide_dupes checkbox for reach as automatic area source
- TOPIC-39: Enable autopilot checkbox when automatic area source is changed
- BUG-1437: Skip tests with non expected TechnicalErrors
- TOPIC-19: Fix multiple sort order possibilities and be more defensive


4.59.4 (2021-07-22)
-------------------

- MAINT: Add base KPI Implementation to ensure adapting it never fails


4.59.3 (2021-07-21)
-------------------

- ZON-6371: Fix invalid host matching for @ containig urls.


4.59.2 (2021-07-20)
-------------------

- ZON-6371: Do not set links with internal hosts like vivi.zeit.de.


4.59.1 (2021-07-20)
-------------------

- ZON-6482: Enable speechbert by default for articles with no genre


4.59.0 (2021-07-19)
-------------------

- TOPIC-36: Add reach as automatic area source

- OPS-2077: Log failed celery tasks, so we can debug them
- TOPIC-19: Randomly sorted content for automatic areas

- FIX: Return correct result count for related topicpages


4.58.1 (2021-07-16)
-------------------

- OPS-2058: Move logout redirect to zeit.ldap
- TOPIC-36: Add Reach as automatic area source


4.58.0 (2021-07-13)
-------------------

- TOPIC-31: Move zeit.web.core.reach to zeit.reach


4.57.7 (2021-07-13)
-------------------

- MAINT: Display principal id if no principal was found


4.57.6 (2021-07-13)
-------------------

- FIX: Use correct form name for autoreload with genre


4.57.5 (2021-07-12)
-------------------

- TOPIC-11: Sort automatic areas by date_last_published


4.57.4 (2021-07-09)
-------------------

- ZON-6316: Speechbert Checkbox: Moving to options and rename label

- OPS-2024: Handles invalid variant size

- TOPIC-16: Add ITMS methods get_content_containing_topicpages and get_content_related_topicpages

- TOPIC-9: Implement TMS order in a way that does not break the related API

- MAINT: Move zeit.retresco.tag to zeit.cms.tagging.tag


4.57.3 (2021-07-05)
-------------------

- BUG-1415: Be more defensive during BC video import

- TOPIC-9: Store topicpage_order abstracted from the concrete TMS fieldnames


4.57.2 (2021-06-30)
-------------------

- FIX: Hide Topicpage sort option when anything else is selected


4.57.1 (2021-06-30)
-------------------

- ZON-6710: Changes topicbox default automatic_type value



4.57.0 (2021-06-29)
-------------------

- ZON-5970: Remove clickcounter integration

- OPS-1985: Use opentelemetry for tracing


4.56.0 (2021-06-28)
-------------------

- TOPIC-9: Provide access to TMS kpi data with `IKPI` adapter


4.55.0 (2021-06-23)
-------------------

- TOPIC-9: Add possibility to sort TMS entries
- TOPIC-9: Add related topics as automatic source

- ZON-6655: Improve wording


4.54.2 (2021-06-21)
-------------------

- OPS-2001: Restrict "change type" to producing+cvd


4.54.1 (2021-06-16)
-------------------

- BEM-54: Be defensive about analyzing the BC response


4.54.0 (2021-06-16)
-------------------

- OPS-1984: Conform to real `Span` API in FakeTracer


4.53.3 (2021-06-07)
-------------------

- BEM-54: Improve Error-Logging for not playable videos


4.53.2 (2021-06-03)
-------------------

- MAINT: Use own converter for RecipeArticles
- OPS-1852: Markdown modules must not be empty

- ZON-6539: remove option for editors to include articles in daily newsletter


4.53.1 (2021-05-31)
-------------------

- STO-185: Handle indeterminable mtime gracefully


4.53.0 (2021-05-27)
-------------------

- ZON-6655: Fix related API, support multiple topicboxes per article

- OPS-1892: Add sample_rate parameter to honeycomb tracer


4.52.2 (2021-05-18)
-------------------

- BUG-1392: Avoid PIL resize with 0 values

- OPS-1359: Conform to field naming scheme for tracing


4.52.1 (2021-04-29)
-------------------

- MAINT: Add feature toggle 'show_automatic_type_in_topicbox'


4.52.0 (2021-04-27)
-------------------

- ZON-5576: Add automatic sources to article topicbox modules


4.51.1 (2021-04-26)
-------------------

- MAINT: Exclude JSON objects from SEO filename rules


4.51.0 (2021-04-23)
-------------------

- ZON-6637: Introduce JSON content object

- ZON-6377: Fix rendering of teaser images with `fill_color=None` parameters


4.50.6 (2021-04-21)
-------------------

- ZON-6614: Support caching time attribute on centerpages


4.50.5 (2021-04-08)
-------------------

- STO-185: Cache content & DAV properties based on file modification times


4.50.4 (2021-04-07)
-------------------

- ZON-6573: Support legal_text attribute on newslettersignups


4.50.3 (2021-03-30)
-------------------

- OPS-1684: Avoid zero division on image ratio calculations

- FIX: Ignore XML comments when parsing article modules


4.50.2 (2021-03-22)
-------------------

- ZON-6478: Follow up, refactor existing_teasers attribute for CP ContentQueries


4.50.1 (2021-03-17)
-------------------

- ZON-6521: Support theme in liveblogs


4.50.0 (2021-03-16)
-------------------

- ZON-6478: Move content query functionality to its own module

- BUG-1250: Hide no more needed 'external' author checkbox


4.49.2 (2021-03-10)
-------------------

- BUG-1366: Make sorting volume listings work again for py3


4.49.1 (2021-03-10)
-------------------

- ZON-6346: Make tickaroo liveblog status required

- BUG-1311: Show "steal lock" button only if user has the required permission

- BUG-1366: Make sorting listings work again for py3


4.49.0 (2021-02-24)
-------------------

- MAINT: Add status code to retresco TechnicalError


4.48.8 (2021-02-10)
-------------------

- ZON-6383: Handle Markdown using python libraries

- ZON-6346: Add article module for tickaroo liveblog


4.48.7 (2021-02-01)
-------------------

- ZON-6275: Urbanairship open channel support


4.48.6 (2021-01-29)
-------------------

- ZETT-98: Provide social channels facebook and twitter for zett


4.48.5 (2021-01-25)
-------------------

- STO-179: Handle changed "total hits" ES search API response


4.48.4 (2021-01-21)
-------------------

- STO-179: Remove overspecific `type` restriction from ES queries


4.48.3 (2021-01-21)
-------------------

- STO-59: Keep internal API of TMS connection stable for zeit.web


4.48.2 (2021-01-19)
-------------------

- STO-59: Upgrade elastic client library to 7.x (it's bw-compat to 2.x)


4.48.1 (2021-01-12)
-------------------

- STO-172: Don't send obsolete DAV properties to TMS


4.48.0 (2021-01-11)
-------------------

- STO-59: Allow Vivi to talk to two TMS instances


4.47.1 (2021-01-06)
-------------------

- BUG-1324: Handle image/author/volume modules correctly during checkin


4.47.0 (2021-01-06)
-------------------

- BUG-1315: Fix Update-Token-Tool for Facebook

- OPS-1516: Make image encoder parameters configurable


4.46.1 (2020-12-18)
-------------------

- BUG-1342: Fix accessing dotted property names in TMSContent


4.46.0 (2020-12-18)
-------------------

- BUG-1342: Apply provided interfaces to TMSContent


4.45.6 (2020-12-18)
-------------------

- ZON-6306: Fix text/bytes handling in MDB interface


4.45.5 (2020-12-16)
-------------------

- ZON-6319: Fix behavior for select the 'no genre' option

- BEM-70: mock is included in the stdlib in py3


4.45.4 (2020-12-16)
-------------------

- OPS-1490: Allow volume to be set to 54 (everywhere)


4.45.3 (2020-12-16)
-------------------

- OPS-1490: Allow volume to be set to 54


4.45.2 (2020-12-10)
-------------------

- OPS-1480: Log pickle on unpickling errors


4.45.1 (2020-12-10)
-------------------

- OPS-1480: Log error when unpickling lxml


4.45.0 (2020-12-04)
-------------------

- ZETT-90: Add vivi logo for ze.tt

- ZON-6162: Update to jinja-2.11


4.44.5 (2020-12-01)
-------------------

- ZON-6214: Sends article to the ContentHub, even if it was "only published"

- STO-57: Add type declarations for countings and foldable


4.44.4 (2020-11-25)
-------------------

- ZON-6213: Fix zeit.cms newsimport test setup.


4.44.3 (2020-11-25)
-------------------

- MAINT: Update product-config in test setup.


4.44.2 (2020-11-19)
-------------------

- STO-82: Make MemoryFile pickleable


4.44.1 (2020-11-18)
-------------------

- PERF: Cache immutable values while calculating image variants


4.44.0 (2020-11-13)
-------------------

- MAINT: Move tracing implementation from zeit.web here so we can
  instrument vivi code paths as well


4.43.3 (2020-11-05)
-------------------

- ZON-6140: Support additional attributes from newslettersignup config


4.43.2 (2020-10-22)
-------------------

- ZON-6149: Pass url during image traversal


4.43.1 (2020-10-22)
-------------------

- ZON-5577: Set default for `force_mobile_images` to true


4.43.0 (2020-10-13)
-------------------

- ZETT-46: Add color theme selection to area settings

- BEM-62: Remove obsolete `IArticle.is_instant_article`

- ZON-6149: Allow to specify imagegroup variants via query parameters


4.42.0 (2020-10-08)
-------------------

- STO-82: Make MemoryFile usable as a context manager


4.41.1 (2020-10-06)
-------------------

- BUG-1291: Set up timebased retract for videos according to the BC
  expires field (take two, after 4.40.3)


4.41.0 (2020-10-01)
-------------------

- PERF: Make mime type detection optional in filesystem connector.
  We actually only need this for the vivi tests, but not in zeit.web,
  and it causes significant overhead.


4.40.3 (2020-09-30)
-------------------

- BUG-1302: Don't overzealously remove invalid field values

- Revert BUG-1291 for now, newly added videos cannot set up timebased
  retract currently


4.40.2 (2020-09-30)
-------------------

- BUG-1291: Set up timebased retract for videos according to the BC
  expires field


4.40.1 (2020-09-30)
-------------------

- BUG-1307: Don't notify HDok during retract


4.40.0 (2020-09-28)
-------------------

- ZON-6068: Implement IArticle.header_color


4.39.5 (2020-09-22)
-------------------

- WOMA-181: Add notification for empty recipe title

- WOMA-204: Add aggregations to retresco.ElasticSearch query api


4.39.4 (2020-09-21)
-------------------

- WOMA-240: Add diet to wochenmarkt ingredients.


4.39.3 (2020-09-10)
-------------------

- MAINT: Update zeit.connector to current zope.generations API


4.39.2 (2020-09-03)
-------------------

- BUG-1283: Size of images in image gallery editor is max 500 px x 500 px

- ZON-6108: Remove legacy ``type`` attribute from content editor line breaks


4.39.1 (2020-08-06)
-------------------

- BUG-1273: Handle toplevel `br` nodes that can appear when pasting content


4.39.0 (2020-08-05)
-------------------

- WOMA-143: Add "special ingredient" to recipelist module


4.38.4 (2020-08-03)
-------------------

- ZON-5981: Restrict retract/delete for authors to producing

- FIX: Catch vgwort connection errors, raising a TechnicalError


4.38.3 (2020-07-31)
-------------------

- BUG-1205: Prevent creating several <br> when pressing enter in content-editable


4.38.2 (2020-07-29)
-------------------

- WOMA-133: Fetch ingredient units from configuration file

- ZON-6041: Add campaign parameters to twitter/facebook push URLs

- ZON-6006: Add article main image url to volume toc.csv


4.38.1 (2020-07-28)
-------------------

- BUG-1255: Prevent adding the same author to an article twice


4.38.0 (2020-07-28)
-------------------

- ZON-6037: Introduce zeit.zett.interfaces.IZTTContent

- ZON-5959: Implement querying HDok for blacklisted entries


4.37.2 (2020-07-28)
-------------------

- MAINT: Make date_print_published writeable via admin tab


4.37.1 (2020-07-24)
-------------------

- FIX: Import necessary packages for pembeds


4.37.0 (2020-07-24)
-------------------

- WOMA-111: Provide plural property from ingredients whitelist

- MAINT: Support variables in pembed parameter definitions


4.36.7 (2020-07-23)
-------------------

- WOMA-141: Update portion range validation for servings


4.36.6 (2020-07-20)
-------------------

- WOMA-136_2: Update list of ingredient units

- WOMA-137: Allow duplicate ingredients in recipe list module


4.36.5 (2020-07-14)
-------------------

- FIX: Handle zope.interface now inheriting getTaggedValues(),
  which broke IBreakingNews type/token in the AddableCMSContentTypeSource


4.36.4 (2020-07-13)
-------------------

- MAINT: Make forward-compatible with zope.interface-5.0


4.36.3 (2020-07-10)
-------------------

- WOMA-96: Don't change access for non performing articles in channel 'wochenmarkt'

- FIX: Remove optional chaining for better browser support

- WOMA-136: Update list of ingredient units


4.36.2 (2020-07-08)
-------------------

- WOMA-126: Remove duplicates in recipe from ES payload.

- WOMA-130: Use ids for ingredient units


4.36.1 (2020-07-07)
-------------------

- FIX: Make `available` work for article modules


4.36.0 (2020-07-03)
-------------------

- ZON-5643: Quote users comments in article


4.35.3 (2020-07-02)
-------------------

- WOMA-116: Validate servings to allow a portion range


4.35.2 (2020-07-02)
-------------------

- WOMA-4: Add defaults for ingredient amount and unit.

- WOMA-115: Add free text details to ingredients in recipelist

- WOMA-120: Add new values to ingredient unit list


4.35.1 (2020-06-30)
-------------------

- MAINT: Ensure we don't use browser-specific directives in
  non-browser ZCML files

- WOMA-99: Polish recipelist module


4.35.0 (2020-06-25)
-------------------

- WOMA-114: Read ingredient and category names from whitelist
  instead of article xml

- WOMA-108: Add ingredientdice article module


4.34.3 (2020-06-24)
-------------------

- MAINT: Derive WOMA whitelists from z.c.c.sources.CachedXMLBase


4.34.2 (2020-06-23)
-------------------

- STO-49: Use default filename mechanics for z.c.cp.TopicpageFilterSource as well


4.34.1 (2020-06-22)
-------------------

- BUG-1247: Fix toc listing content type filter

- MAINT: Move browser imports from zeit.wochenmarkt to zeit.wochenmarkt.browser


4.34.0 (2020-06-18)
-------------------

- STO-49: Support setting a default filename for source config files


4.33.5 (2020-06-18)
-------------------

- MAINT: Remove unused imports


4.33.4 (2020-06-17)
-------------------

- WOMA-66: Add recipe categories to articles

- WOMA-103: Add checkbox to instruct merging multiple recipe list modules

- WOMA-104: Add subheading to recipe list

- WOMA-85: Extract recipe attributes and write it to destination fields in
  ElasticSearch

- STO-49: Support setting a default filename for source config files


4.33.3 (2020-06-09)
-------------------

- OPS-1214: No longer update zeit.cms.relation "who references whom" index


4.33.2 (2020-06-04)
-------------------

- MAINT: Sort teaser formgroup below options in article editor


4.33.1 (2020-06-04)
-------------------

- ZON-5861: Remove `commentsAPIv2` property from `ICommonMetadata`

- BUG-1216: Allow referencing gallery objects in article topicbox module


4.33.0 (2020-05-29)
-------------------

- WOMA-65: Introduce module: recipe list
- MAINT: Log hdok create calls


4.32.11 (2020-05-27)
--------------------

- MAINT: Sort access above authors in article form


4.32.10 (2020-05-25)
--------------------

- PY3: Make workflow timing logging work under py3


4.32.9 (2020-05-25)
-------------------

- FIX: Just filter frame-less renditions completely


4.32.8 (2020-05-25)
-------------------

- PY3: Be defensive about brightcove renditions without frame size


4.32.7 (2020-05-19)
-------------------

- PY3: Fix text/bytes handling in DAV property parsing


4.32.6 (2020-05-18)
-------------------

- ZON-5886: Make FluentRecordFormatter py3-compatible


4.32.5 (2020-05-11)
-------------------

- ZON-5758: Display hdok result list even if there's only one match,
  since the new name could be a single-hit-substring of an existing name


4.32.4 (2020-05-11)
-------------------

- IR-51: Translate filter values

- MAINT: Update to changed hdok create API yet again


4.32.3 (2020-05-11)
-------------------

- ZON-5869: Add manual link to article embed form


4.32.2 (2020-05-08)
-------------------

- BUG-1238: Fix volume zplus webtrekk query


4.32.1 (2020-05-06)
-------------------

- ZON-5758: Make IAuthor.status optional


4.32.0 (2020-05-05)
-------------------

- ZON-4945: Provide TMSContentQuery._fetch() extension point for zeit.web


4.31.3 (2020-05-05)
-------------------

- MAINT: Don't break when running test in zeit.web, when pytest option
  `--visible` will be added by both vivi.core and zeit.web


4.31.2 (2020-05-05)
-------------------

- WOMA-68: Set IAuthor.is_author use_default=True


4.31.1 (2020-05-04)
-------------------

- IR-51: Volume table of contents


4.31.0 (2020-04-29)
-------------------

- IR-73: Look up author in HDok before creating it in vivi


4.30.3 (2020-04-28)
-------------------

- ZON-5869: Update social embed wording


4.30.2 (2020-04-28)
-------------------

- BUG-1234: Ignore `DeleteProperty` in tms reindex


4.30.1 (2020-04-27)
-------------------

- BUG-1234: Handle security properly in "re-report to vgwort" view


4.30.0 (2020-04-23)
-------------------

- ZON-5728: Upgrade to selenium-3.x with geckodriver


4.29.2 (2020-04-03)
-------------------

- MAINT: Update wording of IConsentInfo.thirdparty_vendors (via @holger)


4.29.1 (2020-04-02)
-------------------

- OPS-1192: Replace stdlib cookie parser with webob,
  so it doesn't break on non-ASCII characters


4.29.0 (2020-03-27)
-------------------

- ZON-5447: Generalize vendor source API to access all config attributes


4.28.0 (2020-03-23)
-------------------

- ZON-5488: Provide IConsentInfo also for z.c.article.IRawXML


4.27.0 (2020-03-16)
-------------------

- MAINT: Use JWT for our "SSO" cookie


4.26.5 (2020-03-12)
-------------------

- WOMA-33: Add cook ability  to authors.


4.26.4 (2020-03-11)
-------------------

- ZON-5635: Handle updates from Brightcove for teaser images


4.26.3 (2020-03-09)
-------------------

- ZON-5635: Put importing video images behind feature toggle
  ``video_import_images``


4.26.2 (2020-03-09)
-------------------

- BUG-1207: Don't try to write DAV cache in webhook notify job

- PY3: Fix text/bytes handling in zeit.connector.filesystem


4.26.1 (2020-03-04)
-------------------

- BUG-1205: Revert bugfix 4.25.15, it causes a different misbehaviour

- ZON-5635: Add teaser images for videos as CMS content


4.26.0 (2020-02-18)
-------------------

- OPS-786: Extract fluent logging helper so zeit.web can reuse it


4.25.15 (2020-02-14)
--------------------

- ZON-5651 etc: Make zeit.edit, zeit.vgwort py3 compatible

- BUG-1205: Remove obsolete browser workaround that inserted
  an additional br element in article editor.


4.25.14 (2020-02-07)
--------------------

- ZON-5679 etc: Make packages py3 compatible:
  z.c.article, cp, dynamicfolder, gallery, image, modules,
  zeit.retresco, wysiwyg

- FIX: Remove influxdb remnants (4.25.10)


4.25.13 (2020-02-03)
--------------------

- HOTFIX: Explicitly specify UTF8 as our encoding


4.25.12 (2020-02-03)
--------------------

- ZON-5659: Use bytes for resource body in z.c.text
  so it conforms to the zeit.connector behaviour


4.25.11 (2020-01-31)
--------------------

- FIX: Turns out zope.app.folder is not a ui-only dependency


4.25.10 (2020-01-31)
--------------------

- ZON-5653: Make zeit.connector, zeit.imp, zeit.content.volume py3 compatible

- OPS-908: Remove notifying influxdb for pushes, has been replaced
  by grafana


4.25.9 (2020-01-30)
-------------------

- BUG-1206: Restrict product-related vgwort author fallback to
  articles without agencies

- ZON-5649 etc: Make packages py3 compatible:
  zeit.cms, zeit.workflow, zeit.find, z.c.author, text, link

- FIX: Index in ES after marking an article as vgwort-todo


4.25.8 (2020-01-20)
-------------------

- BUG-1199: Patch bug in zeep SOAP client so it serializes agency
  authors (only code, no firstname/lastname) correctly

- FIX: Add missing import, log end of vgwort report job

- FIX: Don't double-b64encode vgwort text


4.25.7 (2020-01-07)
-------------------

- FIX: Make xmldiff work with objectify for further cases


4.25.6 (2020-01-07)
-------------------

- ZON-5693: Try different MDB fields for copyright


4.25.5 (2020-01-07)
-------------------

- FIX: Add missing import

- MAINT: Remove obsolete IArticle.layout property


4.25.4 (2020-01-06)
-------------------

- ZON-5645: Make source-code (hopefully) py3 compatible

- ZON-5771: Make RTE toolbar compatible for Google Chrome

- FIX: Make xmldiff work with objectify



4.25.3 (2019-12-18)
-------------------

- OPS-1163: Remove connector lockinfo cache


4.25.2 (2019-12-17)
-------------------

- MAINT: Display different vivi logo on loginform too


4.25.1 (2019-12-17)
-------------------

- MAINT: Display different vivi logo in staging


4.25.0 (2019-12-16)
-------------------

- ZON-5560: Implement `Animation` content type

- ZON-5590: Remove z3c.conditionalviews

- ZON-5748: Replace xml_compare with xmldiff

- MAINT: Update wording of IConsentInfo.thirdparty_vendors (via @milan)


4.24.1 (2019-12-10)
-------------------

- HOTFIX: Don't require special permission to add embed when toggle is off


4.24.0 (2019-12-09)
-------------------

- ZON-5694: Implement NewsletterSignup Module


4.23.2 (2019-12-09)
-------------------

- FIX: Declare dependency that friedbert-preview needs


4.23.1 (2019-12-09)
-------------------

- ZON-5594: Honor separated UI dependencies by not needlessly importing UI code


4.23.0 (2019-12-06)
-------------------

- ZON-5586: Finally remove unused XMLSnippet field (since zeit.cms-2.35.1)

- ZON-5585: Replace SilverCity with Pygments for syntax highlighting

- ZON-5603: Replace suds with zeep as our SOAP client library

- ZON-5615: Require special permission to add embed objects,
  set feature toggle `add_content_permissions` to enable

- ZON-5615: Removed inline code entry from rawtext module

- ZON-5593, ZON-5594: Declare test-only and UI dependencies separately


4.22.3 (2019-11-26)
-------------------

- BUG-1136: Don't show admin checked-out for objects without ICommonMetadata,
  implement a basic SEO tab for them.


4.22.2 (2019-11-22)
-------------------

- BUG-1156: Only count teasers, not all modules when adjusting auto block count
  (reprise of 4.17.4)


4.22.1 (2019-11-22)
-------------------

- FIX: Restore translations that were lost in 4.22.0

- MAINT: Also pre-warm folder entries


4.22.0 (2019-11-21)
-------------------

- ZON-5614: Make social embed labels and texts more explainable

- ZON-5472: Add `IAuthor.show_letterbox_link` field


4.21.7 (2019-11-15)
-------------------

- MAINT: Apply enrich toggle also on publish


4.21.6 (2019-11-15)
-------------------

- MAINT: Add feature toggle `tms_enrich_on_checkin` so we can disable
  it in overload situations


4.21.5 (2019-11-15)
-------------------

- OPS-1133: Modify DAV cache conflict resolution rules
  to avoid deleting cache entries (doing that was definitely correct,
  but it caused thundering herd issues e.g. for often-used folders)
  Set feature toggle `dav_cache_delete_property_on_conflict` (or `childname`)
  to revert to the previous behaviour.


4.21.4 (2019-11-13)
-------------------

- HOTFIX: brown-bag 4.21.3 due to syntax error


4.21.3 (2019-11-13)
-------------------

- OPS-1133: Don't write traceback into the property cache anymore


4.21.2 (2019-11-13)
-------------------

- OPS-1133: Write the traceback into the property cache


4.21.1 (2019-11-12)
-------------------

- ZON-5473: Set force_mobile_image=True for gallery teasers

- OPS-1133: More diagnostics for DAV cache deletes


4.21.0 (2019-11-11)
-------------------

- OPS-1133: Implement a DAV cache (properties and childnames) with
  dogpile/redis as the storage backend


4.20.5 (2019-11-08)
-------------------

- OPS-1133: Allow setting a connector referrer for non-http requests


4.20.4 (2019-11-06)
-------------------

- OPS-1133: More diagnostics for DAV cache deletes


4.20.3 (2019-11-05)
-------------------

- OPS-1133: Add diagnostics to DAV cache deletes


4.20.2 (2019-10-29)
-------------------

- MAINT: Put article image `animation` behind feature toggle `article_image_animation`


4.20.1 (2019-10-25)
-------------------

- FIX: Set dlps to dlp instead of yet another separate "now"


4.20.0 (2019-10-23)
-------------------

- ZON-5447: Translate vendor IDs to external CMP values


4.19.0 (2019-10-22)
-------------------

- ZON-5523: Add additional amp_code field to embeds


4.18.0 (2019-10-22)
-------------------

- ZON-5464: Add `animation` field to article image module

- OPS-1133: Add diagnostics to DAV cache conflict resolution


4.17.5 (2019-10-02)
-------------------

- BUG-1156: Roll back change for now, it breaks autopilots


4.17.4 (2019-10-02)
-------------------

- BUG-1156: Only count teasers, not all modules when adjusting auto block count


4.17.3 (2019-10-02)
-------------------

- BUG-1155: Display topiclink fields below each other in area edit form


4.17.2 (2019-10-02)
-------------------

- ZON-5432: Provide agencies in ITMSContent


4.17.1 (2019-09-26)
-------------------

- ZON-5480: Store mime type in a location that's actually writeable


4.17.0 (2019-09-26)
-------------------

- ZON-5480: Make mime type editable for text objects


4.16.1 (2019-09-25)
-------------------

- MAINT: Make article module library configurable just like CP


4.16.0 (2019-09-24)
-------------------

- ZON-5490: Add module to embed thirdparty content by pasting an URL

- OPS-1116: Add an explicit commit to separate the two retresco files


4.15.7 (2019-09-19)
-------------------

- ZC-450: Remove diagnostics, we found out what we needed


4.15.6 (2019-09-19)
-------------------

- ZC-450: More diagnostics


4.15.5 (2019-09-19)
-------------------

- ZC-450: Add diagnostics to the requests timeout signal handler setup


4.15.4 (2019-09-17)
-------------------

- FIX: Make admin form work for articles again after 4.8.4


4.15.3 (2019-09-16)
-------------------

- FIX: Require CMP vendors to be unique


4.15.2 (2019-09-16)
-------------------

- ZON-5453: Use dropdown instead of checkbox widget for CMP vendors

- FIX: Put display of CMP fields behind feature toggle as well


4.15.1 (2019-09-12)
-------------------

- HOTFIX: Fix error in author object-details view
  (wrong source base class)


4.15.0 (2019-09-11)
-------------------

- ZON-5488: Implement IConsentInfo for the rawtext module

- ZON-5483: Allow configuring which authorship roles to report to vgwort

- FIX: Don't break when creating a volume without a `centerpage` setting

- MAINT: Don't show supertitle in volume toc


4.14.0 (2019-09-05)
-------------------

- ZON-5453: Add dropdown with `IConsentInfo.has_thirdparty` to embed form

- ZON-5447: Add multiselect with `IConsentInfo.thirdparty_vendors` to embed form


4.13.0 (2019-09-04)
-------------------

- FIX: Display label "Author" when role is None

- MAINT: Move runtime feature toggle source here from zeit.web

- MAINT: Put `agencies` field on article UI behind feature toggle


4.12.2 (2019-09-04)
-------------------

- ZON-5394: Do not report authorships with role to vgwort


4.12.1 (2019-09-03)
-------------------

- OPS-1106: Switch vgwort report to query elasticsearch instead of queryserver


4.12.0 (2019-08-29)
-------------------

- ZON-5432: Add value `Agentur` to `IAuthor.status` source;
  add `ICommonMetadata.agencies` field;
  add `IAuthor.initials` field


4.11.1 (2019-08-27)
-------------------

- ZON-5394: Styling to put role field on the same line as location


4.11.0 (2019-08-27)
-------------------

- ZON-5394: Add IAuthorReference.role field


4.10.0 (2019-08-26)
-------------------

- ZON-5376: Add `IArticle.prevent_ligatus_indexing` property


4.9.4 (2019-08-09)
------------------

- BUG-1101: Fix CSS for "to top" link


4.9.3 (2019-08-09)
------------------

- BUG-1094: Retrieve the number of actually available hits if a TMS/ES
  query hits the configured ES result limit.


4.9.2 (2019-08-09)
------------------

- ZON-5338: Explicitly set defaults declared in IVideo during BC-import

- ZON-5380: Add "access" filter to search form

- ZON-5378: Display the embed name instead of its raw code in CP editor

- ZON-5321: Make article ITopicbox.supertitle required

- ZON-5241: Update to changed zope.viewlet sorting behaviour


4.9.1 (2019-08-08)
------------------

- HOTFIX: Fix paragraph handling after beautifulsoup udpate


4.9.0 (2019-08-05)
------------------

- IR-163: Add preview link to volume toc

- IR-68: Support importing image group images (and minimal metadata)
  via drag&drop from the IR MDB UI

- MAINT: Revert __name__ handling from 4.8.3, Producing members often
  massage the source code to fix formatting issues, and these
  attributes get in the way of that


4.8.4 (2019-07-30)
------------------

- HOTFIX: Fix typo in admin "checked-in" form

- HOTFIX: Not all ressorts in TOC now come from k4 anymore


4.8.3 (2019-07-29)
------------------

- MAINT: Keep __name__ attributes in article


4.8.2 (2019-07-29)
------------------

- FIX: Exclude temporary articles from checkin webhooks


4.8.1 (2019-07-29)
------------------

- IR-95: Add hdok id to ICommonMetadata.authorships XML reference

- IR-41: Add `has_audio` field to the checked-out admin form


4.8.0 (2019-07-25)
------------------

- IR-71: Add IAuthor.honorar_id

- MAINT: Increase favicon resolution


4.7.0 (2019-07-17)
------------------

- IR-54: Also allow IR article_id, not just uuid to query the lock status


4.6.3 (2019-07-11)
------------------

- ZC-90: Move field to activate new comments backend to article form


4.6.2 (2019-07-10)
------------------

- BUG-1074: Index TMS on rename


4.6.1 (2019-07-10)
------------------

- BUG-1069: Don't index imagegroup or gallery thumbnail images in TMS

- FIX: Don't try to nonexistent content in TMS re-enrich hook

- IR-142: Also collect articles imported from InterRed for volume table of contents


4.6.0 (2019-07-10)
------------------

- ZON-5239: Topicbox improvments

- ZON-5291: Rename content marketing teaser adplace

- ZON-5347: Set 'is_amp' default to true

- BUG-1121: Enable RSS-Teaser objects as lead candidate


4.5.5 (2019-07-08)
------------------

- FIX: Fix volume title listing breaking with non ascii char


4.5.4 (2019-07-05)
------------------

- BUG-1096: Allow storing `False` for embed parameters with default=True


4.5.3 (2019-07-04)
------------------

- IR-67: Display different error for still published objects when lock is set


4.5.2 (2019-07-04)
------------------

- FIX: Use correcter syntax for tags in push to influxdb


4.5.1 (2019-07-04)
------------------

- MAINT: Exclude connector test content from released egg


4.5.0 (2019-07-04)
------------------

- IR-66: Retry webhook on errors

- IR-67: Add `locked` flag to workflow info that prevents publishing


4.4.1 (2019-07-03)
------------------

- FIX: Use correct syntax for tags in push to influxdb

- MAINT: Send info about UA pushes to both grafana and influxdb,
  so we can hopefully shut down the influxdb soon


4.4.0 (2019-06-20)
------------------

- MAINT: Add linkSource (mostly for pembeds)


4.3.0 (2019-06-12)
------------------

- ZON-4585: Add topiclink fields to areas


4.2.0 (2019-06-06)
------------------

- ZON-5260: Add background color to cardstacks

- MAINT: Clean up whitespace from rss feeds


4.1.0 (2019-06-03)
------------------

- IR-77: Add `mdb_id` field to images

- IR-77: Add `setup_timebased_jobs` xmlrpc method

- PERF: Determine image mime type only on demand, not always upfront on resolve


4.0.5 (2019-05-22)
------------------

- FIX: Exclude rss teaser from referenced cp content


4.0.4 (2019-05-20)
------------------

- IR-36: Notify checkin webhooks also for newly created objects

- FIX: Declare brightcove console script properly


4.0.3 (2019-05-16)
------------------

- IR-59: Allow configuring excludes for checkin webhook


4.0.2 (2019-05-08)
------------------

- FIX: Fix xml.zeit.de being able to render rss feed objects


4.0.1 (2019-05-02)
------------------

- FIX: Fix RSS Content query breaking hide dupes clause


4.0.0 (2019-04-29)
------------------

- Initial monorepo release.
