Video checkout
==============

Videos can be checked out despite being editable without checkout. This is
necessary to blend in with other content editing mechanismn like teasers in
zeit.content.cp.


>>> from z3c.etestbrowser.testing import ExtendedTestBrowser
>>> browser = ExtendedTestBrowser()
>>> browser.addHeader('Authorization', 'Basic user:userpw')
>>> browser.handleErrors = False
>>> browser.open(
...     'http://localhost/++skin++vivi/repository-brightcove/video:1234/')

There is no checkout link though. The user doesn't need to know that videos can
be checked out:

>>> browser.getLink('Checkout')
Traceback (most recent call last):
LinkNotFoundError


Triggering the checkout via URL works:

>>> browser.open('@@checkout')
>>> print browser.title.strip()
video:1234 â€“ Edit video
>>> browser.getControl('Title').value = 'New title'
>>> browser.getControl('Apply', index=0).click()

Saving has not changed the data in the repository:


>>> browser.open(
...     'http://localhost/++skin++vivi/repository-brightcove/video:1234/')
>>> print browser.getControl('Title').value
Starrummel auf dem Roten Teppich zur 82. Oscar-Verleihung
>>> browser.goBack()

Checking in works as usual:

>>> browser.getLink('Checkin').click()
>>> print browser.url
http://localhost/++skin++vivi/repository-brightcove/video%3A1234/@@view.html
