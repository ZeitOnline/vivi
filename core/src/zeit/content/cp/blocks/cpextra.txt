CP-Extra bases blocks
======================

``cp_extra`` based blocks are *very* simple blocks. It is not even possible to
change them.

MostRead
++++++++

The most read block shows the most read articles. It is only valid in the
Informatives area:

>>> import zeit.content.cp.centerpage
>>> cp = zeit.content.cp.centerpage.CenterPage()
>>> lead = cp['lead']
>>> import zeit.content.cp.interfaces
>>> import zope.component
>>> factory = zope.component.getAdapter(
...     lead, zeit.content.cp.interfaces.IElementFactory, name='mostread')
Traceback (most recent call last):
    ...
ComponentLookupError: (<zeit.content.cp.area.Lead object at 0x...>, <InterfaceClass zeit.content.cp.interfaces.IElementFactory>, 'mostread')
>>> zope.component.getAdapter(
...     cp['informatives'],
...     zeit.content.cp.interfaces.IElementFactory, name='mostread')
<zeit.content.cp.blocks.cpextra.MostreadFactory object at 0x...>


When a centerpage is created the toplist is automatically added[#functional]_:

>>> import zeit.cms.interfaces
>>> container = zeit.cms.interfaces.ICMSContent('http://xml.zeit.de/online/')
>>> container['cp'] = zeit.content.cp.centerpage.CenterPage()
>>> mr = container['cp']['informatives'].values()[0]
>>> mr.type
'mostread'
>>> import lxml.etree
>>> print lxml.etree.tostring(mr.xml, pretty_print=True)
<container...>
  <cp_extra id="mostread"/>
</container>


MostCommented
+++++++++++++

The most read block shows the most read articles. It is only addable in the
informatives area:

>>> import zeit.content.cp.centerpage
>>> cp = zeit.content.cp.centerpage.CenterPage()
>>> lead = cp['lead']
>>> import zeit.content.cp.interfaces
>>> import zope.component
>>> zope.component.getAdapter(
...     lead, zeit.content.cp.interfaces.IElementFactory, name='mostcommented')
Traceback (most recent call last):
    ...
ComponentLookupError: (<zeit.content.cp.area.Lead object at 0x...>, <InterfaceClass zeit.content.cp.interfaces.IElementFactory>, 'mostcommented')
>>> zope.component.getAdapter(
...     cp['informatives'],
...     zeit.content.cp.interfaces.IElementFactory, name='mostcommented')
<zeit.content.cp.blocks.cpextra.MostcommentedFactory object at 0x...>

When a centerpage is created the toplist is automatically added. We look at the
cp created above:

>>> import zeit.cms.interfaces
>>> mc = container['cp']['informatives'].values()[1]
>>> mc.type
'mostcommented'
>>> import lxml.etree
>>> print lxml.etree.tostring(mc.xml, pretty_print=True)
<container...>
  <cp_extra id="mostcommented"/>
</container>



Weather
+++++++

Shows the weather ...

>>> factory = zope.component.getAdapter(
...     lead, zeit.content.cp.interfaces.IElementFactory, name='weather')
>>> block = factory()
>>> import lxml.etree
>>> print lxml.etree.tostring(block.xml, pretty_print=True)
<container...>
  <cp_extra id="weather"/>
</container>


Stocks
++++++

Shows stock info

>>> factory = zope.component.getAdapter(
...     lead, zeit.content.cp.interfaces.IElementFactory, name='stocks')
>>> block = factory()
>>> import lxml.etree
>>> print lxml.etree.tostring(block.xml, pretty_print=True)
<container...>
  <cp_extra id="stocks"/>
</container>



.. [#functional]

    >>> import zeit.cms.testing
    >>> zeit.cms.testing.set_site()
    >>> principal = zeit.cms.testing.create_interaction()
