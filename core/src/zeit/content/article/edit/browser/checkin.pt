<fieldset i18n:domain="zeit.cms">
  <tal:block condition="not: view/can_checkout">
  <div tal:condition="view/checkin_errors" i18n:translate="">The following errors need to be corrected before checkin:</div>
  <dl class="errors">
    <tal:x repeat="error view/checkin_errors">
      <dt tal:condition="error/name" tal:content="string:${error/name}: " />
      <dd tal:content="structure error/snippet" />
    </tal:x>
  </dl>

  <a id="checkin"
     cms:cp-module='follow-link'
     tal:attributes="
        href python:view.can_checkin and view.checkin_url or '#';
        class python:'button' + (not view.can_checkin and ' disabled' or '');
     "
     i18n:translate="">Checkin</a>
  <a id="checkin_correction"
     cms:cp-module='follow-link'
     tal:attributes="
        href python:view.can_checkin and view.checkin_url + '?semantic_change=' or '#';
        class python:'button' + (not view.can_checkin and ' disabled' or '');
     "
     i18n:translate="">Checkin (correction)</a>
  <div class="exit">
    <label i18n:translate="">...or cancel and</label>
    <a class="warning"
       id="delete_workingcopy"
       cms:cp-module='zeit.edit.LightBoxForm'
       tal:attributes="href string:${context/@@absolute_url}/@@delete.html"
       i18n:translate="">Delete from Workingcopy</a>
  </div>
  </tal:block>

  <a class="button"
     id="publish"
     cms:cp-module='zeit.edit.LightBoxForm'
     tal:attributes="href string:${context/@@absolute_url}/@@publish.html"
     tal:condition="view/can_checkout"
     i18n:translate="">Publish</a>
  <a class="button"
     id="retract"
     cms:cp-module='zeit.edit.LightBoxForm'
     tal:attributes="href string:${context/@@absolute_url}/@@retract.html"
     tal:condition="python:view.published and view.can_checkout"
     i18n:translate="">Retract</a>

<script type="text/javascript">
</script>
</fieldset>
