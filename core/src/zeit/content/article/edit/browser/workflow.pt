<fieldset i18n:domain="zeit.cms">
  <tal:block condition="not: view/can_checkout">

  <form tal:attributes="action view/@@absolute_url" method="POST">
    <p>
      <a class="button warning"
         id="delete_workingcopy"
         cms:cp-module='zeit.edit.LightBoxForm'
         tal:attributes="href string:${context/@@absolute_url}/@@delete.html"
         i18n:translate="">Cancel</a>
    </p>
  </form>
  </tal:block>

  <a id="delete_from_repository"
     tal:attributes="href string:${context/@@absolute_url}/@@delete.html;
                     class python:'button warning' + (
                     ' disabled' if view.published else '');
                     cms:cp-module python:'zeit.edit.LightBoxForm'
                        if not view.published else None;"
     tal:condition="view/can_checkout"
     i18n:translate="">Delete</a>

  <a class="button"
     id="publish"
     cms:cp-module='zeit.edit.LightBoxForm'
     tal:attributes="href string:${context/@@absolute_url}/@@publish.html"
     tal:condition="view/can_checkout"
     i18n:translate="">Publish</a>
  <a class="button"
     id="retract"
     cms:cp-module='zeit.edit.LightBoxForm'
     tal:attributes="href string:${context/@@absolute_url}/@@retract.html"
     tal:condition="python:view.published and view.can_checkout
                    and not view.is_new"
     i18n:translate="">Retract</a>

</fieldset>
