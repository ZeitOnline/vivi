<fieldset i18n:domain="zeit.cms">
  <tal:block condition="not: view/can_checkout">
  <div tal:condition="view/checkin_errors" i18n:translate="">The following errors need to be corrected before checkin:</div>
  <dl class="errors">
    <tal:x repeat="error view/checkin_errors">
      <dt tal:condition="error/name" tal:content="string:${error/name}: " />
      <dd tal:content="structure error/snippet" />
    </tal:x>
  </dl>

  <form tal:attributes="action view/@@absolute_url" method="POST">
    <p>
      <tal:translate i18n:translate="">Current timestamp:</tal:translate>
      <span class="timer" />
    </p>
    <p>
      <input type="checkbox" name="semantic_change" id="semantic_change"
             value="true" />
      <label for="semantic_change" i18n:translate="">
        Set last semantic change</label>
    </p>
    <p>
      <a class="button warning"
         id="delete_workingcopy"
         cms:cp-module='zeit.edit.LightBoxForm'
         tal:attributes="href string:${context/@@absolute_url}/@@delete.html"
         i18n:translate="">Cancel</a>
      <input
         type="submit" name="checkin" id="checkin" value="Save"
         class="button"
         tal:attributes="disabled python:None if view.can_checkin else 'disabled'"
         i18n:attributes="value" />
    </p>
  </form>
  </tal:block>

  <a id="delete_from_repository"
     cms:cp-module='zeit.edit.LightBoxForm'
     tal:attributes="href string:${context/@@absolute_url}/@@delete.html;
                     class python:'button warning' + (
                     ' disabled' if view.published else '')"
     tal:condition="view/can_checkout"
     i18n:translate="">Delete</a>

  <a class="button"
     id="publish"
     cms:cp-module='zeit.edit.LightBoxForm'
     tal:attributes="href string:${context/@@absolute_url}/@@publish.html"
     tal:condition="view/can_checkout"
     i18n:translate="">Publish</a>
  <a class="button"
     id="retract"
     cms:cp-module='zeit.edit.LightBoxForm'
     tal:attributes="href string:${context/@@absolute_url}/@@retract.html"
     tal:condition="python:view.published and view.can_checkout
                    and not view.is_new"
     i18n:translate="">Retract</a>

</fieldset>
